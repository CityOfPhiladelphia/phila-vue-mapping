{"version":3,"file":"phila-vue-mapping.js","sources":["../src/leaflet/util/bind-events.js","../src/leaflet/Map.vue","../src/leaflet/Control.vue","../src/leaflet/Geojson.vue","../src/leaflet/CircleMarker.vue","../src/leaflet/ControlCorner.vue","../src/leaflet/PopUp.vue","../src/leaflet/PopUpContent.vue","../src/leaflet/Polygon.vue","../src/leaflet/Polyline.vue","../src/esri-leaflet/TiledMapLayer.vue","../src/components/OpacitySlider.vue","../src/esri-leaflet/TiledOverlay.vue","../src/esri-leaflet/DynamicMapLayer.vue","../src/esri-leaflet/FeatureLayer.vue","../src/util/unique-id.js","../src/esri-leaflet/WebMap.vue","../src/esri-leaflet/WebMapLayer.vue","../src/components/AddressInput.vue","../src/components/AddressCandidateList.vue","../src/components/VectorMarker.vue","../src/components/PngMarker.vue","../src/components/BasemapToggleControl.vue","../src/components/BasemapSelectControl.vue","../src/components/FullScreenMapToggleTab.vue","../src/components/LocationControl.vue","../src/components/MeasureControl.vue","../src/components/LegendControl.vue","../src/components/BasemapTooltip.vue","../src/components/ModalAbout.vue","../src/cyclomedia/recordings-client.js","../src/cyclomedia/Button.vue","../src/leaflet/Circle.vue","../src/cyclomedia/RecordingCircle.vue","../src/util/svg-icon.js","../src/util/triangle-icon.js","../src/cyclomedia/SvgViewConeMarker.vue","../src/cyclomedia/map-panel-mixin.js","../src/cyclomedia/Widget.vue","../src/pictometry/Button.vue","../src/pictometry/map-panel-mixin.js","../src/pictometry/PngMarker.vue","../src/pictometry/ViewCone.vue","../src/pictometry/Widget.vue","../src/pictometry/Layer.vue","../src/main.js"],"sourcesContent":["// inspired by https://github.com/KoRiGaN/Vue2Leaflet/blob/master/src/utils/eventsBinder.js\r\nfunction bindEvents(vue, leafletElement, events) {\r\n  // get just leaflet events\r\n  const leafletEvents = Object.keys(events)\r\n                              .filter(eventName => {\r\n                                return eventName.startsWith('l-');\r\n                              })\r\n                              .map(eventName => eventName.slice(2));\r\n\r\n  for (let leafletEvent of leafletEvents) {\r\n    const vueEvent = 'l-' + leafletEvent;\r\n    leafletElement.on(leafletEvent, (e) => {\r\n      vue.$emit(vueEvent, e);\r\n    });\r\n  }\r\n}\r\n\r\nexport default bindEvents;\r\n","<template>\r\n  <div :class=\"this.mapContainerClass\">\r\n    <!-- the leaflet map -->\r\n    <div class=\"map\"\r\n         ref=\"map\"\r\n         id=\"map\"\r\n    />\r\n      <div>\r\n        <slot />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    Map,\r\n    LatLng,\r\n    LatLngBounds\r\n  } from 'leaflet';\r\n  import bindEvents from './util/bind-events';\r\n\r\n  export default {\r\n    props: [\r\n      'center',\r\n      'zoom',\r\n      'zoomControlPosition',\r\n      'minZoom',\r\n      'maxZoom',\r\n    ],\r\n    mounted() {\r\n      const map = this.$leafletElement = this.createLeafletElement();\r\n\r\n      // move zoom control\r\n      map.zoomControl.setPosition(this.$props.zoomControlPosition);\r\n\r\n      // put in state\r\n      this.$store.commit('setMap', { map });\r\n\r\n      this.setMapView(this.center);\r\n\r\n      this.$nextTick(() => {\r\n        map.attributionControl.setPrefix('<a target=\"_blank\" href=\"//www.phila.gov/it/aboutus/units/Pages/GISServicesGroup.aspx\">City of Philadelphia | CityGeo</a>');\r\n      })\r\n\r\n      // signal children to mount\r\n      for (let child of this.$children) {\r\n        // REVIEW it seems weird to pass children their own props. trying to\r\n        // remember why this was necessary... binding issue?\r\n        child.parentMounted(this, child.$props);\r\n      }\r\n\r\n      // bind events\r\n      // http://leafletjs.com/reference.html#map-click\r\n\r\n      // const MAP_EVENTS = [\r\n      //   'click',\r\n      //   'dblclick',\r\n      //   'mousedown',\r\n      //   'mouseup',\r\n      //   'mouseover',\r\n      //   'mouseout',\r\n      //   'mousemove',\r\n      //   'contextmenu',\r\n      //   'focus',\r\n      //   'blur',\r\n      //   'preclick',\r\n      //   'load',\r\n      //   'unload',\r\n      //   'viewreset',\r\n      //   'movestart',\r\n      //   'move',\r\n      //   'moveend',\r\n      //   'dragstart',\r\n      //   'drag',\r\n      //   'dragend',\r\n      //   'zoomstart',\r\n      //   'zoomend',\r\n      //   'zoomlevelschange',\r\n      //   'resize',\r\n      //   'autopanstart',\r\n      //   'layeradd',\r\n      //   'layerremove',\r\n      //   'baselayerchange',\r\n      //   'overlayadd',\r\n      //   'overlayremove',\r\n      //   'locationfound',\r\n      //   'locationerror',\r\n      //   'popupopen',\r\n      //   'popupclose'\r\n      // ];\r\n\r\n      // TODO warn if trying to bind an event that doesn't exist\r\n      bindEvents(this, this.$leafletElement, this._events);\r\n      if (this.$config.map.clickToIdentifyFeatures) {\r\n        map.on('click', this.identifyFeatures);\r\n      }\r\n    },\r\n    watch: {\r\n      center(nextCenter) {\r\n        this.setMapView(nextCenter);\r\n      },\r\n      zoom(nextZoom) {\r\n        if (!nextZoom) return;\r\n        this.$leafletElement.setZoom(nextZoom);\r\n        this.$store.commit('setMapZoom', nextZoom);\r\n      },\r\n      mapBounds(nextBounds) {\r\n        console.log('this.$leafletElement:', this.$leafletElement);\r\n        this.setMapBounds(nextBounds)\r\n      },\r\n      fullScreenMapEnabled() {\r\n        // console.log('Map.vue fullScreenMapEnabled watch is firing');\r\n        this.$leafletElement.invalidateSize();\r\n      },\r\n      webMapDisplayedLayers(nextWebMapDisplayedLayers) {\r\n        let intersectingLayers = [];\r\n        for (let feature of this.intersectingFeatures) {\r\n          intersectingLayers.push(feature.feature.layerName);\r\n        }\r\n        console.log('map.vue watch nextWebMapDisplayedLayers:', nextWebMapDisplayedLayers, 'intersectingLayers:', intersectingLayers);\r\n        for (let layer of intersectingLayers) {\r\n          if (!nextWebMapDisplayedLayers.includes(layer)) {\r\n            this.$store.commit('setIntersectingFeatures', []);\r\n            return;\r\n          }\r\n        }\r\n      },\r\n    },\r\n    computed: {\r\n      mapContainerClass() {\r\n        if (this.$config.map.containerClass) {\r\n          return this.$config.map.containerClass\r\n        } else {\r\n          return 'map-container'\r\n        }\r\n      },\r\n      fullScreenMapEnabled() {\r\n        return this.$store.state.fullScreenMapEnabled;\r\n      },\r\n      mapBounds() {\r\n        return this.$store.state.map.bounds;\r\n      },\r\n      webMapDisplayedLayers() {\r\n        return this.$store.state.map.webMapDisplayedLayers;\r\n      },\r\n      intersectingFeatures() {\r\n        return this.$store.state.map.intersectingFeatures;\r\n      }\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        const { zoomControlPosition, ...options } = this.$props;\r\n        return new Map(this.$refs.map, options);\r\n      },\r\n      childDidMount(child) {\r\n        child.addTo(this.$leafletElement);\r\n      },\r\n      setMapView(xy = [], zoom = this.zoom) {\r\n        if (xy.length === 0) return;\r\n        const [ lng, lat ] = xy;\r\n        const latLng = new LatLng(lat, lng);\r\n\r\n        // we used \"setView\" here because when you refreshed the app with an address in the url,\r\n        // \"panTo\" was getting stepped on by \"setZoom\" and it was not happening\r\n        this.$nextTick(() => {\r\n          this.$leafletElement.setView(latLng, zoom);\r\n        })\r\n      },\r\n      setMapBounds(bounds) {\r\n        if (bounds._northEast) {\r\n          // console.log('MAP.VUE SETMAPBOUNDS IS RUNNING:', bounds._northEast.lat, bounds._northEast.lng, bounds._southWest.lat, bounds._southWest.lng);\r\n          const corner1 = L.latLng(bounds._northEast.lat, bounds._northEast.lng);\r\n          const corner2 = L.latLng(bounds._southWest.lat, bounds._southWest.lng);\r\n          const bounds2 = L.latLngBounds(corner1, corner2);\r\n          console.log('bounds2:', bounds2, bounds2.isValid())\r\n          // this.$leafletElement.fitBounds(bounds);\r\n          const map = this.$leafletElement;\r\n          console.log('bounds:', bounds, 'this.$leafletElement:', this.$leafletElement, 'map:', map);\r\n          map.fitBounds(bounds2);\r\n        }\r\n      },\r\n\r\n      // this is used when the click should identify features\r\n      identifyFeatures(e) {\r\n        const map = this.$leafletElement\r\n        const clickBounds = L.latLngBounds(e.latlng, e.latlng);\r\n        // console.log('clickHandler in Map is starting, e:', e, 'clickBounds:', clickBounds);\r\n        // console.log('map._layers', map._layers);\r\n        let intersectingFeatures = [];\r\n        let geometry;\r\n        for (let layer in map._layers) {\r\n          var overlay = map._layers[layer];\r\n          // console.log('layer:', layer, 'overlay:', overlay);\r\n          if (overlay._layers) {\r\n            for (let oLayer in overlay._layers) {\r\n              const feature = overlay._layers[oLayer];\r\n              // console.log('feature:', feature);\r\n              if (feature.feature) {\r\n                geometry = feature.feature.geometry.type;\r\n                // console.log('clickHandler LAYER:', layer, 'FEATURE:', feature, 'GEOMETRY:', geometry);\r\n                let bounds;\r\n                if (geometry === 'Polygon' || geometry === 'MultiPolygon') {\r\n                  // console.log('polygon or multipolygon');\r\n                  if (feature.contains(e.latlng)) {\r\n                    // console.log('about to run checkForDuplicates')\r\n                    this.checkForDuplicates(layer, feature, intersectingFeatures);\r\n                  }\r\n                }\r\n                else if (geometry === 'LineString') {\r\n                  // console.log('Line');\r\n                  bounds = feature.getBounds();\r\n                  if (bounds && clickBounds.intersects(bounds)) {\r\n                    this.checkForDuplicates(layer, feature, intersectingFeatures);\r\n                  }\r\n                } else if (geometry === 'Point') {\r\n                  // console.log('Point');\r\n                  bounds = L.latLngBounds(feature._latlng, feature._latlng);\r\n                  if (bounds && clickBounds.intersects(bounds)) {\r\n                    this.checkForDuplicates(layer, feature, intersectingFeatures);\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this.$store.commit('setPopupCoords', e.latlng);\r\n        this.$store.commit('setIntersectingFeatures', intersectingFeatures);\r\n      },\r\n      checkForDuplicates(layer, feature, intersectingFeatures) {\r\n        // console.log('checkForDuplicates is running, layer:', layer, 'feature:', feature);\r\n        let ids = []\r\n        for (let i = 0; i < intersectingFeatures.length; i++) {\r\n          ids[i] = layer + '_' + intersectingFeatures[i].feature.id;\r\n        }\r\n        // console.log('layer:', layer, 'feature.feature.id:', feature.feature.id);\r\n        if (!ids.includes(layer + '_' + feature.feature.id)) {\r\n          // console.log('checkForDuplicates going to push to intersectingFeatures:', layer, feature.feature.id);\r\n          intersectingFeatures.push(feature);\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n  .map-container {\r\n    height: 100%;\r\n  }\r\n\r\n  .map-container-type2 {\r\n    height: calc(100vh - 109px);\r\n  }\r\n\r\n  .map {\r\n    height: 100%;\r\n  }\r\n\r\n  @media (max-width: 749px) {\r\n    .map-container {\r\n      height: 300px;\r\n    }\r\n  }\r\n\r\n  /* @media screen and (max-width: 40em) { */\r\n  @media screen and (max-width: 750px) {\r\n    .map-container-type2 {\r\n      height: calc(100vh - 141px);\r\n    }\r\n  }\r\n</style>\r\n","<!--\r\nThe way this works is: Vue renders the control in a slot below the map, and\r\nwhen the map is ready we wrap the control in a Leaflet class and add it to the\r\nmap, which also removes it from the Vue slot.\r\n\r\nREVIEW does this break anything with Vue? Because it's expecting a node that\r\nisn't there?\r\n-->\r\n\r\n<template>\r\n  <div>\r\n    <slot />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import * as L from 'leaflet';\r\n\r\n  export default {\r\n    props: ['position'],\r\n    methods: {\r\n      createLeafletElement(L) {\r\n        // console.log('Control.vue createLeafletElement is running')\r\n        // subclass Control to accept an el which gets mounted to the map\r\n        class ControlParent extends L.Control {\r\n          constructor(el, options) {\r\n            super(options);\r\n            this.el = el;\r\n          }\r\n          onAdd() {\r\n            const el = this.el;\r\n\r\n            // keep clicks from hitting the map\r\n            L.DomEvent.disableClickPropagation(el);\r\n            L.DomEvent.disableScrollPropagation(el);\r\n\r\n            return el;\r\n          }\r\n        }\r\n\r\n        const el = this.$el;\r\n        // console.log('Control.vue el:', el);\r\n        return new ControlParent(el, {\r\n          position: this.position\r\n        });\r\n      },\r\n      parentMounted(parent, props) {\r\n        // console.log('Control.vue parentMounted is running, parent:', parent, 'props:', props);\r\n        const leafletElement = this.createLeafletElement(L);\r\n        this.$leafletElement = leafletElement;\r\n        const map = parent.$leafletElement;\r\n        // console.log('Control.vue parentMounted is calling addTo(map)');\r\n        leafletElement.addTo(map);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n","<script>\r\n  import { geoJSON } from 'leaflet';\r\n  import bindEvents from './util/bind-events';\r\n\r\n  // pascal case\r\n  const GeoJson = geoJSON;\r\n\r\n  export default {\r\n    props: [\r\n      'geojson',\r\n      'fillColor',\r\n      'color',\r\n      'weight',\r\n      'opacity',\r\n      'fillOpacity',\r\n      'data'\r\n    ],\r\n    mounted() {\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map.map;\r\n      // REVIEW kind of hacky/not reactive?\r\n      if (map) {\r\n        leafletElement.addTo(map);\r\n      }\r\n\r\n      bindEvents(this, this.$leafletElement, this._events);\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    // we don't actually render anything, but need to define either a template\r\n    // or a render function\r\n    render(h) {\r\n      return;\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        const props = this.$props;\r\n        const {\r\n          geojson,\r\n          ...options\r\n        } = props;\r\n\r\n        // console.log('geojson', geojson)\r\n        const newGeojson = new GeoJson(geojson, options);\r\n        //this.$store.commit('setCircleMarkers', newCircleMarker);\r\n        return newGeojson;\r\n        // if the geoJSON feature is a point, it needs to be styled through \"pointToLayer\"\r\n        // const type = this.$props.overlay.type;\r\n        // const style = this.$props.overlay.style;\r\n        // return new GeoJson(this.$props.geojson, {\r\n        //   color: this.$props.color,\r\n        //   weight: this.$props.weight,\r\n        //   // pointToLayer: function (feature, latlng) {\r\n      \t// \t// \treturn type(latlng, style)\r\n        //   // }\r\n        // });\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n</script>\r\n","<script>\r\n  import { CircleMarker }  from 'leaflet';\r\n  import bindEvents from './util/bind-events';\r\n\r\n  export default {\r\n    props: [\r\n      'latlng',\r\n      'radius',\r\n      'fillColor',\r\n      'color',\r\n      'weight',\r\n      'opacity',\r\n      'fillOpacity',\r\n      'data',\r\n      'pane'\r\n    ],\r\n    watch: {\r\n      latlng(nextLatlng) {\r\n        // alert('watch circleMarker props latlng is running nextLatlng:', nextLatlng);\r\n        this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n        const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n        const map = this.$store.state.map.map;\r\n        if (map) {\r\n          leafletElement.addTo(map);\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map.map;\r\n      if (map) {\r\n        leafletElement.addTo(map);\r\n      }\r\n\r\n      // bind events\r\n      // TODO warn if trying to bind an event that doesn't exist\r\n      bindEvents(this, this.$leafletElement, this._events);\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    // we don't actually render anything, but need to define either a template\r\n    // or a render function\r\n    render(h) {\r\n      return;\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        const props = this.$props;\r\n        const {\r\n          latlng,\r\n          ...options\r\n        } = props;\r\n        const newCircleMarker = new CircleMarker(latlng, options);\r\n        return newCircleMarker;\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n","<script>\r\n  import * as L from 'leaflet';\r\n\r\n  export default {\r\n    props: [\r\n      'vSide',\r\n      'hSide'\r\n    ],\r\n    render(h) {\r\n      return;\r\n    },\r\n    methods: {\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        map._controlCorners[this.vSide + this.hSide] = L.DomUtil.create('div', 'leaflet-'+this.vSide+' leaflet-'+this.hSide, map._controlContainer);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n  .leaflet-fullleft {\r\n    position: absolute;\r\n    bottom: 0px; /* possible because the placeholder's parent is the map */\r\n    left: 0px;\r\n    padding-bottom: 10px;\r\n    z-index: 500;\r\n  }\r\n\r\n  .leaflet-fulltop {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 0px;\r\n    padding-bottom: 10px;\r\n    z-index: 500;\r\n  }\r\n\r\n  .leaflet-centervert {\r\n    /* position: relative; */\r\n    /* top: 100px;\r\n    left: 0px; */\r\n    /* padding-top: 40%; */\r\n    padding-bottom: 30%;\r\n    z-index: 500;\r\n  }\r\n\r\n  .leaflet-almostleft {\r\n    position: absolute;\r\n    bottom: 0px;\r\n    left: 30px;\r\n    padding-bottom: 10px;\r\n    z-index: 500;\r\n  }\r\n\r\n  .leaflet-almostleft .leaflet-control {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  .leaflet-almostright {\r\n    position: absolute;\r\n    top: 0px;\r\n    right: 60px;\r\n    padding-bottom: 10px;\r\n    z-index: 500;\r\n  }\r\n\r\n  .leaflet-almostright .leaflet-control {\r\n    margin-top: 10px;\r\n  }\r\n</style>\r\n","<template>\r\n  <div>\r\n    <slot />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import * as L from 'leaflet';\r\n  export default {\r\n    mounted() {\r\n      // console.log('popup mounted is running');\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      // leafletElement.addTo(this._map);\r\n      leafletElement.on('remove', this.removePopup)\r\n    },\r\n    destroyed() {\r\n      // console.log('pop-up destroyed is running')\r\n      this.$leafletElement.removeFrom(this._map);\r\n    },\r\n    watch: {\r\n      intersectingFeatures(nextIntersectingFeatures) {\r\n        // console.log('Popup WATCH intersectingFeatures is firing');\r\n        const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n        // leafletElement.addTo(this._map);\r\n        leafletElement.on('remove', this.removePopup)\r\n      }\r\n    },\r\n    computed: {\r\n      _map() {\r\n        return this.$store.state.map.map;\r\n      },\r\n      intersectingFeatures() {\r\n        return this.$store.state.map.intersectingFeatures;\r\n      },\r\n      popupCoords() {\r\n        return this.$store.state.map.popupCoords;\r\n      }\r\n    },\r\n    methods: {\r\n      removePopup() {\r\n        // console.log('closed Popup, this:', this);\r\n        this.$store.commit('setIntersectingFeatures', []);\r\n      },\r\n      createLeafletElement() {\r\n        const popup = L.popup({\r\n          minWidth: 300,\r\n          offset: L.point(0, -24)\r\n        }).setLatLng(this.popupCoords)\r\n          .setContent(this.$children[0].$el)\r\n          .openOn(this._map);\r\n\r\n        return popup;\r\n      }\r\n    }\r\n  };\r\n</script>\r\n","<template>\r\n  <div>\r\n    <div v-if=\"this.popupHtmlArray.length > 1\"\r\n         class=\"text-center\"\r\n    >\r\n      <ul class=\"pagination text-center\">\r\n        <li :class=\"this.previousIsDisabled\">\r\n          <span v-if=\"this.previousIsDisabled !== 'pagination-previous'\">\r\n            Previous\r\n          </span>\r\n          <a @click=\"changePopup(currentPopup-1)\"\r\n             v-if=\"this.previousIsDisabled === 'pagination-previous'\"\r\n          >\r\n            Previous\r\n          </a>\r\n        </li>\r\n        <div class=\"inline-div\"\r\n             v-if=\"this.popupHtmlArrayLength <= 9\"\r\n        >\r\n          <li v-for=\"(popup, index) in this.popupHtmlArray\"\r\n              :class=\"isCurrent(index)\"\r\n          >\r\n            <span v-if=\"isCurrent(index) === 'current'\">\r\n              {{ index + 1 }}\r\n            </span>\r\n            <a @click=\"changePopup(index)\"\r\n               v-if=\"isCurrent(index) !== 'current'\"\r\n            >\r\n              {{ index + 1 }}\r\n            </a>\r\n          </li>\r\n        </div>\r\n        <div class=\"inline-div popup-div\"\r\n             v-if=\"this.popupHtmlArrayLength >= 10\"\r\n        >\r\n          {{ currentPopup + 1 }} of {{ this.popupHtmlArrayLength }}\r\n        </div>\r\n        <li :class=\"this.nextIsDisabled\">\r\n          <span v-if=\"this.nextIsDisabled !== 'pagination-next'\">\r\n            Next\r\n          </span>\r\n          <a @click=\"changePopup(currentPopup+1)\"\r\n             v-if=\"this.nextIsDisabled === 'pagination-next'\"\r\n          >\r\n            Next\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div v-html=\"this.popupHtmlArray[this.currentPopup]\">\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        'currentPopup': 0\r\n      }\r\n    },\r\n    mounted() {\r\n      // console.log('POPUPCONTENT MOUNTED')\r\n      this.$store.commit('setSelectedPopupLayer', this.intersectingFeatures[0]);\r\n    },\r\n    destroyed() {\r\n      // console.log('PopupContent destroyed')\r\n      this.$store.commit('setSelectedPopupLayer', null);\r\n    },\r\n    watch: {\r\n      popupHtmlArray(nextPopupHtmlArray) {\r\n        this.currentPopup = 0\r\n        this.$store.commit('setSelectedPopupLayer', this.intersectingFeatures[0]);\r\n      }\r\n    },\r\n    methods: {\r\n      changePopup(index) {\r\n        this.currentPopup = index;\r\n        this.$store.commit('setSelectedPopupLayer', this.intersectingFeatures[index]);\r\n      },\r\n      isCurrent(index) {\r\n        if (index === this.currentPopup) {\r\n          return 'current'\r\n        }\r\n      },\r\n    },\r\n    computed: {\r\n      previousIsDisabled() {\r\n        if (this.currentPopup === 0) {\r\n          return 'pagination-previous disabled'\r\n        } else {\r\n          return 'pagination-previous'\r\n        }\r\n      },\r\n      nextIsDisabled() {\r\n        if (this.currentPopup === this.popupHtmlArray.length - 1) {\r\n          return 'pagination-next disabled'\r\n        } else {\r\n          return 'pagination-next'\r\n        }\r\n      },\r\n      intersectingFeatures() {\r\n        return this.$store.state.map.intersectingFeatures;\r\n      },\r\n      popupHtmlArray() {\r\n        let htmlArray = [];\r\n        for (let feature in this.$store.state.map.intersectingFeatures) {\r\n          htmlArray.push(this.$store.state.map.intersectingFeatures[feature].feature.popupHtml)\r\n        }\r\n        return htmlArray;\r\n      },\r\n      popupHtmlArrayLength() {\r\n        return this.popupHtmlArray.length;\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n\r\n  .leaflet-popup-content {\r\n    margin-top: 8px;\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  .pagination {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  .leaflet-popup-close-button {\r\n    font-size: 24px !important;\r\n    height: 24px !important;\r\n    line-height: 24px !important;\r\n    width: 24px !important;\r\n  }\r\n\r\n  .inline-div {\r\n    display: inline-block;\r\n  }\r\n\r\n  .popup-div {\r\n    font-size: 14px;\r\n  }\r\n\r\n</style>\r\n","<script>\r\n  import { Polygon } from 'leaflet';\r\n\r\n  export default {\r\n    props: [\r\n      'latlngs',\r\n      'color',\r\n      'weight',\r\n      'fill',\r\n      'pane'\r\n    ],\r\n    mounted() {\r\n      // console.log('Polygon mounted is firing');\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map.map;\r\n      if (map) {\r\n        // console.log('Polygon adding to map, element:', leafletElement);\r\n        leafletElement.addTo(map);\r\n      }\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    render(h) {\r\n      return;\r\n    },\r\n    watch: {\r\n      latlngs(nextLatLngs) {\r\n        // console.log('polygon latlngs changed');\r\n        this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n        const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n        const map = this.$store.state.map.map;\r\n        if (map) {\r\n          // console.log('on update, polygon adding to map, element:', leafletElement);\r\n          leafletElement.addTo(map);\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        // console.log('Polygon createLeafletElement is firing', this.$props.latlngs);\r\n        return new Polygon(this.$props.latlngs, {\r\n          color: this.$props.color,\r\n          weight: this.$props.weight,\r\n          fill: this.$props.fill,\r\n          pane: this.$props.pane,\r\n          'z-index': 9999,\r\n        });\r\n      },\r\n      parentMounted(parent) {\r\n        // console.log('Polygon parentMounted is firing, this.$leafletElement:', this.$leafletElement);\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      },\r\n    }\r\n  };\r\n\r\n</script>\r\n","<script>\r\n  import { Polyline } from 'leaflet';\r\n\r\n  export default {\r\n    props: [\r\n      'latlngs',\r\n      'color',\r\n      'weight',\r\n      'pane'\r\n    ],\r\n    mounted() {\r\n      console.log('polyline mounted is firing');\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map.map;\r\n      if (map) {\r\n        console.log('polyline adding to map, element:', leafletElement);\r\n        leafletElement.addTo(map);\r\n      }\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    render(h) {\r\n      return;\r\n    },\r\n    watch: {\r\n      latlngs(nextLatLngs) {\r\n        console.log('polyline latlngs changed');\r\n        this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n        const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n        const map = this.$store.state.map.map;\r\n        if (map) {\r\n          console.log('on update, polyline adding to map, element:', leafletElement);\r\n          leafletElement.addTo(map);\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        console.log('polyline createLeafletElement is firing, latlngs:', this.$props.latlngs);\r\n        return new Polyline(this.$props.latlngs, {\r\n          color: this.$props.color,\r\n          weight: this.$props.weight,\r\n          pane: this.$props.pane,\r\n          'z-index': 10000,\r\n        });\r\n      },\r\n      parentMounted(parent) {\r\n        console.log('polyline parentMounted is firing, this.$leafletElement:', this.$leafletElement);\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      },\r\n    }\r\n  };\r\n\r\n</script>\r\n","<script>\r\n  import * as L from 'leaflet';\r\n  import { tiledMapLayer as TiledMapLayer } from 'esri-leaflet';\r\n\r\n  export default {\r\n    props: [\r\n      'url',\r\n      'minZoom',\r\n      'maxZoom',\r\n      'zIndex',\r\n      'attribution'\r\n    ],\r\n    mounted() {\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map.map;\r\n\r\n      // REVIEW kind of hacky/not reactive?\r\n      if (map) {\r\n        leafletElement.addTo(map);\r\n        map.attributionControl.removeAttribution('overwrite');\r\n        map.attributionControl.removeAttribution('<span class=\"esri-attributions\" style=\"line-height:14px; vertical-align: -3px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; display:inline-block; max-width:1385px;\"></span>');\r\n      }\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    // we don't actually render anything, but need to define either a template\r\n    // or a render function\r\n    render(h) {\r\n      return;\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        const props = Object.assign({}, this.$props);\r\n        const mapLayer = new TiledMapLayer(props);\r\n        return mapLayer;\r\n\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n        map.attributionControl.removeAttribution('overwrite');\r\n        map.attributionControl.removeAttribution('<span class=\"esri-attributions\" style=\"line-height:14px; vertical-align: -3px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; display:inline-block; max-width:1385px;\"></span>');\r\n      }\r\n    }\r\n  };\r\n</script>\r\n","<script>\r\n  import * as L from 'leaflet';\r\n\r\n  // TODO look into a cleaner way of importing from esri-leaflet\r\n  // import Control from '../leaflet/Control';\r\n  //\r\n  // // REVIEW is there a better way to extend a vue component?\r\n  // const {props, methods} = Control;\r\n\r\n  let opacity_layer;\r\n\r\n  export default {\r\n    props: [\r\n      'layer',\r\n      'position',\r\n      'initialOpacity'\r\n    ],\r\n    created() {\r\n      let opacityValue = this.$props.initialOpacity * 100\r\n      // console.log(\"opacityValue\", opacityValue);\r\n\r\n      L.Control.opacitySlider = L.Control.extend({\r\n        options: {\r\n          position: 'topright'\r\n        },\r\n        setOpacityLayer: function (layer) {\r\n          opacity_layer = layer;\r\n        },\r\n        onAdd: function (map) {\r\n          // console.log('on add', this, this.$props);\r\n          var opacity_slider_div = L.DomUtil.create('div', 'opacity_slider_control');\r\n\r\n          $(opacity_slider_div).slider({\r\n            orientation: \"vertical\",\r\n            range: \"min\",\r\n            min: 0,\r\n            max: 100,\r\n            value: opacityValue,\r\n            step: 10,\r\n            start: function ( event, ui) {\r\n              //When moving the slider, disable panning.\r\n              map.dragging.disable();\r\n              map.once('mousedown', function (e) {\r\n                map.dragging.enable();\r\n              });\r\n            },\r\n            slide: function ( event, ui ) {\r\n              var slider_value = ui.value / 100;\r\n              opacity_layer.setOpacity(slider_value);\r\n            }\r\n          });\r\n\r\n          $(opacity_slider_div).click(function(e) {\r\n            e.stopPropagation();\r\n          })\r\n\r\n          return opacity_slider_div;\r\n        }\r\n      });\r\n    },\r\n    mounted() {\r\n\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map;\r\n      // REVIEW kind of hacky/not reactive?\r\n      if (map) {\r\n        this.$nextTick(() => {\r\n          leafletElement.addTo(map.map);\r\n        });\r\n      }\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeControl(this.$leafletElement);\r\n    },\r\n    // we don't actually render anything, but need to define either a template\r\n    // or a render function\r\n    render(h) {\r\n      return;\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        const OpacitySlider = new L.Control.opacitySlider;\r\n        OpacitySlider.setPosition(this.$props.position);\r\n        OpacitySlider.setOpacityLayer(this.$props.layer);\r\n        return OpacitySlider;\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        map.addControl(this.$leafletElement);\r\n      }\r\n    }\r\n  };\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n.opacity_slider_control .ui-slider-range {\r\n    background-image: none;\r\n    background-color: #646464;\r\n    height: 200px;\r\n}\r\n\r\n</style>\r\n","<!-- REVIEW should this be merged with TiledMapLayer.vue and put the opacity\r\nslider in a slot? -->\r\n\r\n<template>\r\n  <opacity-slider :layer=\"this.$leafletElement\"\r\n                  :position=\"'topleft'\"\r\n                  :initialOpacity=\"opacity\"\r\n  />\r\n  <!-- <div v-if=\"!opacitySlider\"></div> -->\r\n</template>\r\n\r\n<script>\r\n  import * as L from 'leaflet';\r\n  import { tiledMapLayer as TiledMapLayer } from 'esri-leaflet';\r\n  import OpacitySlider from '../components/OpacitySlider.vue';\r\n\r\n  export default {\r\n    components: {\r\n      OpacitySlider\r\n    },\r\n    props: [\r\n      'url',\r\n      'minZoom',\r\n      'maxZoom',\r\n      'zIndex',\r\n      'attribution',\r\n      'opacity'\r\n    ],\r\n    created() {\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map.map;\r\n\r\n      // REVIEW kind of hacky/not reactive?\r\n      if (map) {\r\n        leafletElement.addTo(map);\r\n        map.attributionControl.removeAttribution('overwrite');\r\n      }\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    // we don't actually render anything, but need to define either a template\r\n    // or a render function\r\n    // render(h) {\r\n    //   return;\r\n    // },\r\n    methods: {\r\n      createLeafletElement() {\r\n        const props = Object.assign({}, this.$props);\r\n        const mapLayer = new TiledMapLayer(props);\r\n        return mapLayer;\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n","<template>\r\n  <opacity-slider :layer=\"this.$leafletElement\"\r\n                  :position=\"'topleft'\"\r\n                  :initialOpacity=\"opacity\"\r\n  />\r\n</template>\r\n<script>\r\n  import * as L from 'leaflet';\r\n  import { dynamicMapLayer as DynamicMapLayer } from 'esri-leaflet';\r\n  // TODO things in esri-leaflet should be standalone and not depend on\r\n  // vue-leaflet-esri components. pass this in as a prop/plugin rather than importing.\r\n  import OpacitySlider from '../components/OpacitySlider.vue';\r\n\r\n  export default {\r\n    components: {\r\n      OpacitySlider\r\n    },\r\n    props: {\r\n      url: {\r\n\r\n      },\r\n      minZoom: {\r\n\r\n      },\r\n      maxZoom: {\r\n\r\n      },\r\n      zIndex: {\r\n\r\n      },\r\n      opacity: {\r\n        default: 1.0\r\n      },\r\n      layers: {\r\n\r\n      },\r\n      layerDefs: {\r\n\r\n      },\r\n      transparent: {\r\n\r\n      },\r\n    },\r\n    created() {\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map.map;\r\n      // REVIEW kind of hacky/not reactive?\r\n      if (map) {\r\n        leafletElement.addTo(map);\r\n      }\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    // we don't actually render anything, but need to define either a template\r\n    // or a render function\r\n    // render(h) {\r\n    //   return;\r\n    // },\r\n    computed: {\r\n\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        const props = Object.assign({}, this.$props);\r\n        return new DynamicMapLayer(props);\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n","<!-- <template>\r\n  <opacity-slider :layer=\"this.$leafletElement\"\r\n                  :position=\"'topleft'\"\r\n  />\r\n</template> -->\r\n<script>\r\n  import * as L from 'leaflet';\r\n  import { featureLayer as FeatureLayer } from 'esri-leaflet';\r\n\r\n  // min and max zooms are not handled by esri leaflet, but are handled by vue\r\n  export default {\r\n    props: [\r\n      'url',\r\n      'minZoom',\r\n      'maxZoom',\r\n      'zIndex',\r\n      'layerName',\r\n      'color',\r\n      'fillColor',\r\n      'fillOpacity',\r\n      'weight',\r\n      'style_',\r\n      'markerType',\r\n      'radius',\r\n      'interactive',\r\n    ],\r\n    created() {\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      console.log('leafletElement:', leafletElement);\r\n      const map = this.$store.state.map.map;\r\n      // REVIEW kind of hacky/not reactive?\r\n      if (map) {\r\n        leafletElement.addTo(map);\r\n      }\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    // we don't actually render anything, but need to define either a template\r\n    // or a render function\r\n    render(h) {\r\n      return;\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        const props = Object.assign({}, this.$props);\r\n\r\n        const map = this.$store.state.map.map;\r\n        const layerName = props.layerName\r\n        if (!map.getPane(layerName)) {\r\n          map.createPane(layerName);\r\n        }\r\n\r\n        // remove underscore from style_ prop. `style` is a vue reserved word.\r\n        const { style_ } = props;\r\n        delete props.style_;\r\n        props.style = style_;\r\n\r\n        if (props.markerType === 'circleMarker') {\r\n          let pointToLayer = function (geojson, latlng) {\r\n            return L.circleMarker(latlng, {\r\n              pane: layerName,\r\n              color: props.color,\r\n              fillColor: props.fillColor,\r\n              fillOpacity: props.fillOpacity,\r\n              weight: props.weight,\r\n              radius: props.radius,\r\n              interactive: props.interactive,\r\n            });\r\n          }\r\n          props.pointToLayer = pointToLayer;\r\n        }\r\n\r\n        return new FeatureLayer(props);\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n\r\n\r\n</style>\r\n","function generateUniqueId() {\r\n  return Math.random().toString(36).substring(7);\r\n}\r\n\r\nexport default generateUniqueId;\r\n","<template>\r\n  <div>\r\n    <slot />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import axios from 'axios';\r\n  import generateUniqueId from '../util/unique-id';\r\n  import * as LEsriWebMap from 'L-esri-WebMap'\r\n\r\n  export default {\r\n    computed: {\r\n      webmapId() {\r\n        // console.log('config', this.$config);\r\n        return this.$config.webmapId;\r\n      }\r\n    },\r\n    methods: {\r\n      parentMounted(parent) {\r\n        const self = this;\r\n        const map = this.$store.state.map.map;\r\n\r\n        const esriUrl = \"https://www.arcgis.com/sharing/rest/content/items/\"+ this.webmapId +\"/data\";\r\n        const params = {\r\n          dataType: 'json',\r\n          webmapId: this.webmapId\r\n        }\r\n        let webMapLayersAndRest = []\r\n\r\n        axios.get(esriUrl, { params }).then(response => {\r\n          const restData = response.data;\r\n          const webMap = this.$webMap = LEsriWebMap.webMap(this.webmapId, { map: map });\r\n          // const webMap = this.$webMap = L.esri.webMap(this.webmapId, { map: map });\r\n\r\n          // console.log('WEBMAP', webMap, 'restData', restData);\r\n          self.$store.commit('setWebMap', webMap);\r\n\r\n          webMap.on('load', function() {\r\n\r\n            map.attributionControl.setPrefix('<a target=\"_blank\" href=\"//www.phila.gov/it/aboutus/units/Pages/GISServicesGroup.aspx\">City of Philadelphia | CityGeo</a>');\r\n\r\n            const ignore = [\"CityBasemap\", \"CityBasemap_Labels\"];\r\n\r\n            // create layerUrls - object mapping layerName to url\r\n            let layerUrls = {};\r\n            for (let layer of webMap.layers) {\r\n              // console.log('layer.title:', layer.title);\r\n              const title = layer.title\r\n              if (!ignore.includes(title)) {\r\n                if (title.includes('_')) {\r\n                  const curLayer = title.split('_')[1];\r\n                  if (layer.layer.service) {\r\n                    // console.log('good', title, layer.layer.service.options.url.replace('https://', '').replace('http://', '').replace(/\\/$/, \"\").toLowerCase());\r\n                    layerUrls[curLayer]=layer.layer.service.options.url.replace('https://', '').replace('http://', '').replace(/\\/$/, \"\").toLowerCase();\r\n                  } else if (layer.layer._layers){\r\n                    // console.log('bad1, then good', title, layer.layer._layers[Object.keys(layer.layer._layers)[0]].service.options.url.replace('https://', '').replace('http://', '').replace(/\\/$/, \"\").toLowerCase());\r\n                    layerUrls[curLayer]=layer.layer._layers[Object.keys(layer.layer._layers)[0]].service.options.url.replace('https://', '').replace('http://', '').replace(/\\/$/, \"\").toLowerCase();\r\n                  } else {\r\n                    // console.log('still bad', title, layer);\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            self.$store.commit('setLayerUrls', layerUrls);\r\n\r\n            // create webMapLayersAndRest\r\n            // let webMapLayersAndRest = []\r\n            const opLayers = restData.operationalLayers\r\n\r\n            // start of for loop\r\n            for (let layer of webMap.layers) {\r\n            // for (let [index, layer] of webMap.layers.splice(1).entries()) {\r\n              if (layer.title === 'CityBasemap') {\r\n                continue;\r\n              }\r\n              let curOpLayer;\r\n              for (let opLayer of opLayers) {\r\n                if (opLayer.title === layer.title) {\r\n                  curOpLayer = opLayer\r\n                }\r\n              }\r\n\r\n              const webmapMetaDataRequestUrl = 'https://www.arcgis.com/sharing/rest/content/items/' + curOpLayer.itemId;\r\n              const id = generateUniqueId();\r\n              let layerObj = {\r\n                'category': layer.title.split('_')[0],\r\n                'title': layer.title.split('_')[1],\r\n                'layer': layer.layer,\r\n                'id': id,\r\n                'serviceItemId': null,\r\n                // 'serviceItemId': curOpLayer.itemId,\r\n                'rest': curOpLayer,\r\n                'opacity': curOpLayer.opacity,\r\n                'type': curOpLayer.layerType,\r\n                'type2': layer.type,\r\n                'legend': null,\r\n                'tags': null,\r\n                'tagsString': null,\r\n              }\r\n\r\n              const params2 = {}\r\n\r\n              if (curOpLayer.itemId){\r\n\r\n                L.esri.request(webmapMetaDataRequestUrl, params2, function (error, response) {\r\n                  if (error) {\r\n                    // console.log('L.esri.request ERROR:', error, 'webmapMetaDataRequestUrl:', webmapMetaDataRequestUrl, 'layerObj:', layerObj);\r\n                    webMapLayersAndRest.push(layerObj);\r\n                    webMapLayersAndRest.sort(function(a, b) {\r\n                      const titleA = a.title.toLowerCase()\r\n                      const titleB=b.title.toLowerCase()\r\n                      if (titleA < titleB) //sort string ascending\r\n                      return -1\r\n                      if (titleA > titleB)\r\n                      return 1\r\n                      return 0 //default return value (no sorting)\r\n                    })\r\n\r\n                  } else {\r\n                    // console.log('WebMap MetaData:', response);\r\n                    const tags = response.tags.map(x => typeof x === 'string' ? x.toLowerCase() : x);\r\n                    const filteredTags =  Array.from(new Set(tags));\r\n                    layerObj.tags = filteredTags;\r\n                    layerObj.tagsString = response.tags.join();\r\n                    webMapLayersAndRest.push(layerObj);\r\n                    webMapLayersAndRest.sort(function(a, b) {\r\n                      const titleA = a.title.toLowerCase()\r\n                      const titleB=b.title.toLowerCase()\r\n                      if (titleA < titleB) //sort string ascending\r\n                      return -1\r\n                      if (titleA > titleB)\r\n                      return 1\r\n                      return 0 //default return value (no sorting)\r\n                    })\r\n                  } // end of if/else error\r\n                }); // end of L.esri.request\r\n\r\n              } else {\r\n                webMapLayersAndRest.push(layerObj);\r\n                webMapLayersAndRest.sort(function(a, b) {\r\n                  const titleA = a.title.toLowerCase()\r\n                  const titleB=b.title.toLowerCase()\r\n                  if (titleA < titleB) //sort string ascending\r\n                  return -1\r\n                  if (titleA > titleB)\r\n                  return 1\r\n                  return 0 //default return value (no sorting)\r\n                })\r\n              } // end of if/else curOpLayer.itemId\r\n\r\n            } // end of for loop\r\n\r\n            // webMapLayersAndRest.sort(function(a, b) {\r\n            //   const titleA = a.title.toLowerCase()\r\n            //   const titleB=b.title.toLowerCase()\r\n            //   if (titleA < titleB) //sort string ascending\r\n            //       return -1\r\n            //   if (titleA > titleB)\r\n            //       return 1\r\n            //   return 0 //default return value (no sorting)\r\n            // })\r\n\r\n            const categories = ['']\r\n            for (let layer of webMapLayersAndRest) {\r\n              if (!categories.includes(layer.category)) {\r\n                categories.push(layer.category);\r\n              }\r\n            }\r\n\r\n            categories.sort(function(a, b) {\r\n              const titleA = a.toLowerCase()\r\n              const titleB=b.toLowerCase()\r\n              if (titleA < titleB) //sort string ascending\r\n                  return -1\r\n              if (titleA > titleB)\r\n                  return 1\r\n              return 0 //default return value (no sorting)\r\n            })\r\n\r\n            self.$store.commit('setWebMapLayersAndRest', webMapLayersAndRest);\r\n            self.$store.commit('setCategories', categories);\r\n            map.createPane('highlightOverlay');\r\n          }) // end of webmap onload\r\n        }, response => {\r\n          console.log('AXIOS ERROR WebMap.vue');\r\n        }) // end of axios\r\n\r\n      }, // end of parentMounted\r\n\r\n    } // end of methods\r\n\r\n  }; // end of export\r\n</script>\r\n","<script>\r\n  export default {\r\n    props: [\r\n      'layer',\r\n      'layerName',\r\n      // minScale, maxScale, and drawingInfo are stored in layerDefinition\r\n      'layerDefinition',\r\n      'opacity',\r\n      'type',\r\n    ],\r\n    data() {\r\n      return {\r\n        'geometryType': null\r\n      }\r\n    },\r\n    watch: {\r\n      opacity(nextOpacity) {\r\n        this.changeOpacity(nextOpacity);\r\n      },\r\n      geometryType(nextGeometryType) {\r\n        // console.log('WATCH GEO TYPE:', nextGeometryType);\r\n        if (nextGeometryType === 'esriGeometryPoint') {\r\n          // console.log('GEOMETRY TYPE IS POINT!');\r\n          if (this.$leafletElement.metadata) {\r\n            this.$leafletElement.on('click', function(e) {\r\n              L.DomEvent.stopPropagation(e);\r\n            })\r\n            this.$leafletElement.on('click', this.clickHandler);\r\n          } else if (this.$leafletElement._layers[Object.keys(this.$leafletElement._layers)[0]].metadata) {\r\n            // console.log('watch leafletelement._layers');\r\n            for (let layer of Object.keys(this.$leafletElement._layers)) {\r\n              // console.log('OBJECT KEYS', Object.keys(this.$leafletElement._layers[layer]._layers));\r\n              for (let innerLayer of Object.keys(this.$leafletElement._layers[layer]._layers)) {\r\n                this.$leafletElement._layers[layer]._layers[innerLayer].options.bubblingMouseEvents = false;\r\n                // console.log('!!!!THIS', this.$leafletElement._layers[layer]._layers[innerLayer]);\r\n              }\r\n              // console.log('layer', layer, this.$leafletElement, 'this.$leafletElement._layers[layer]', this.$leafletElement._layers[layer]);\r\n              this.$leafletElement._layers[layer].on('click', function(e) {\r\n                L.DomEvent.stopPropagation(e);\r\n              })\r\n              this.$leafletElement._layers[layer].on('click', this.clickHandler);// {\r\n              // console.log('e', e, 'this', this, 'layer', layer, 'this._layers', this._layers, 'this._layers[layer]', this._layers[layer]);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      scale() {\r\n        return this.$store.state.map.scale;\r\n      },\r\n    },\r\n    created() {\r\n      const leafletElement = this.$leafletElement = this.layer;\r\n      if (this.layer.metadata) {\r\n        this.layer.metadata(function(error, metadata) {\r\n          // console.log('metadata', metadata);\r\n          this.geometryType = metadata.geometryType\r\n        }, this);\r\n      } else if (this.layer._layers[Object.keys(this.layer._layers)[0]].metadata){\r\n        this.layer._layers[Object.keys(this.layer._layers)[0]].metadata(function(error, metadata) {\r\n          // console.log('metadata', metadata);\r\n          this.geometryType = metadata.geometryType\r\n        }, this);\r\n      }\r\n    },\r\n    mounted() {\r\n      // console.log('THE LAYER:', this.$leafletElement, 'THE GEO TYPE:', this.geometryType);\r\n      const map = this.$store.state.map.map;\r\n      if (map) {\r\n        this.$leafletElement.addTo(map);\r\n      }\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    render(h) {\r\n      return;\r\n    },\r\n    methods: {\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      },\r\n      changeOpacity(nextOpacity) {\r\n        // console.log('webMapLayer changeOpacity is running, nextOpacity:', nextOpacity, 'LEAFLET ELEMENT:', this.$leafletElement);\r\n        let element;\r\n        // sometimes you have to dig into the leafletElement to get to the objects being shown\r\n        // one way to know whether you have to do that is whether the leafletElement has a \"legend\" function\r\n        if (!this.$leafletElement.legend) {\r\n          element = this.$leafletElement._layers[Object.keys(this.$leafletElement._layers)[0]];\r\n        } else {\r\n          element = this.$leafletElement;\r\n        }\r\n\r\n        // if it is not a feature layer, you can change the opacity of the entire layer\r\n        if (this.$props.type != 'FL') {\r\n          element.setOpacity(nextOpacity);\r\n        } else {\r\n          element.eachFeature(function(layer){\r\n            // console.log('LAYER', layer);\r\n            if (layer._icon) {\r\n              // console.log('LAYER icon', layer);\r\n              const style = layer._icon.attributes.style.nodeValue;\r\n              const styleSlice = style.slice(0, style.indexOf('; opacity'));\r\n              const styleConcat = styleSlice.concat('; opacity:', nextOpacity, '; fill-opacity:', nextOpacity, ';');\r\n              layer._icon.attributes.style.nodeValue = styleConcat;\r\n            } else if (layer._path) {\r\n              // console.log('LAYER path', layer);\r\n              if (layer.options.fillOpacity === 0) {\r\n                layer.setStyle({\r\n                  opacity: nextOpacity,\r\n                })\r\n              } else if (layer.options.opacity === 0) {\r\n                layer.setStyle({\r\n                  fillOpacity: nextOpacity\r\n                })\r\n              } else {\r\n                layer.setStyle({\r\n                  opacity: nextOpacity,\r\n                  fillOpacity: nextOpacity\r\n                })\r\n              }\r\n            } // end of elseIf layer._path\r\n          }) // end of eachFeature\r\n        } // end of else - it is a FL\r\n      }, // end of changeOpacity\r\n\r\n      // nearly the same function is in Map.vue\r\n      // this one is used when the click is ON a point\r\n      clickHandler(e) {\r\n        const map = this.$store.state.map.map;\r\n        const clickBounds = L.latLngBounds(e.layer._latlng, e.layer._latlng);\r\n        // console.log('clickHandler in WebMapLayer is starting, e:', e, 'e.layer._latlng', e.layer._latlng);\r\n        // console.log('map._layers', map._layers);\r\n        let intersectingFeatures = [];\r\n        let geometry;\r\n        for (let layer in map._layers) {\r\n          const overlay = map._layers[layer];\r\n          if (overlay._layers) {\r\n            // console.log('IF overlay._layers');\r\n            for (let oLayer in overlay._layers) {\r\n              let feature = overlay._layers[oLayer];\r\n              // feature.layerName = this.$props.layerName;\r\n\r\n              if (feature.feature) {\r\n                geometry = feature.feature.geometry.type;\r\n                // console.log('clickHandler LAYER:', layer, 'FEATURE:', feature, 'GEOMETRY:', geometry);\r\n                let bounds;\r\n                if (geometry === 'Polygon' || geometry === 'MultiPolygon') {\r\n                  // console.log('polygon or multipolygon');\r\n                  if (feature.contains(e.latlng)) {\r\n                    this.checkForDuplicates(layer, feature, intersectingFeatures);\r\n                  }\r\n                }\r\n                else if (geometry === 'LineString') {\r\n                  // console.log('Line');\r\n                  bounds = feature.getBounds();\r\n                  if (bounds && clickBounds.intersects(bounds)) {\r\n                    this.checkForDuplicates(layer, feature, intersectingFeatures);\r\n                  }\r\n                } else if (geometry === 'Point') {\r\n                  bounds = L.latLngBounds(feature._latlng, feature._latlng);\r\n                  // console.log('Point, bounds:', bounds, 'clickBounds:', clickBounds);\r\n                  if (bounds && clickBounds.intersects(bounds)) {\r\n                    // console.log('Winner - feature:', feature, 'bounds:', bounds, 'clickBounds:', clickBounds);\r\n                    this.checkForDuplicates(layer, feature, intersectingFeatures);\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this.$store.commit('setPopupCoords', e.latlng);\r\n        this.$store.commit('setIntersectingFeatures', intersectingFeatures);\r\n      },\r\n      checkForDuplicates(layer, feature, intersectingFeatures) {\r\n        // console.log('checkForDuplicates is running, layer:', layer, 'feature:', feature);\r\n        let ids = []\r\n        for (let i = 0; i < intersectingFeatures.length; i++) {\r\n          ids[i] = layer + '_' + intersectingFeatures[i].feature.id;\r\n        }\r\n        if (!ids.includes(layer + '_' + feature.feature.id)) {\r\n          intersectingFeatures.push(feature);\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n","<template>\r\n  <div :class=\"this.containerClass\">\r\n    <form @submit.prevent=\"handleSearchFormSubmit\"\r\n          autocomplete=\"off\"\r\n          id=\"search-form\"\r\n          class=\"pvm-search-control-form\"\r\n    >\r\n      <!-- <div class=\"form-group\"> -->\r\n        <input :class=\"this.inputClass\"\r\n               id=\"pvm-search-control-input\"\r\n               :placeholder=\"this.$props.placeholder || 'Search the map'\"\r\n               :value=\"this.addressEntered\"\r\n               tabindex=\"0\"\r\n               @keyup=\"didType\"\r\n        />\r\n      <!-- </div> -->\r\n    </form>\r\n    <button :class=\"this.buttonClass\"\r\n            v-if=\"this.addressAutocompleteEnabled && this.addressEntered != '' && this.addressEntered != null\"\r\n            @click=\"handleFormX\"\r\n    >\r\n      <i class=\"fa fa-times fa-lg\"></i>\r\n    </button>\r\n    <button :class=\"this.buttonClass\"\r\n            name=\"pvm-search-control-button\"\r\n            tabindex=\"-1\"\r\n            @click=\"this.handleSearchFormSubmit\"\r\n    >\r\n      <i class=\"fa fa-search fa-lg\"></i>\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import * as L from 'leaflet';\r\n  import _ from 'lodash';\r\n  import debounce from 'lodash.debounce';\r\n  import axios from 'axios';\r\n\r\n  export default {\r\n    props: [\r\n      'position',\r\n      'placeholder',\r\n    ],\r\n    computed: {\r\n      map() {\r\n        return this.$store.state.map.map;\r\n      },\r\n      addressEntered() {\r\n        return this.$store.state.addressEntered;\r\n      },\r\n      containerClass() {\r\n        if (this.isMobileOrTablet) {\r\n          return 'pvm-search-control-container-mobile';\r\n        } else {\r\n          return 'pvm-search-control-container';\r\n        }\r\n      },\r\n      inputClass() {\r\n        if (this.isMobileOrTablet) {\r\n          if (this.addressAutocompleteEnabled) {\r\n            if (this.addressEntered === '' || this.addressEntered === null) {\r\n              return 'pvm-search-control-input-mobile';\r\n            } else {\r\n              return 'pvm-search-control-input-mobile-full';\r\n            }\r\n          } else {\r\n            return 'pvm-search-control-input-mobile';\r\n          }\r\n        } else {\r\n          if (this.addressAutocompleteEnabled) {\r\n            if (this.addressEntered === '' || this.addressEntered === null) {\r\n              return 'pvm-search-control-input';\r\n            } else {\r\n              return 'pvm-search-control-input-full';\r\n            }\r\n          } else {\r\n            return 'pvm-search-control-input';\r\n          }\r\n        }\r\n      },\r\n      buttonClass() {\r\n        if (this.isMobileOrTablet) {\r\n          return 'pvm-search-control-button-mobile'\r\n        } else {\r\n          return 'pvm-search-control-button'\r\n        }\r\n      },\r\n      addressAutocompleteEnabled() {\r\n        // TODO this is temporarily disabled\r\n        if (this.$config.addressInput) {\r\n          if (this.$config.addressInput.autocompleteEnabled === true) {\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n    },\r\n    methods: {\r\n      createLeafletElement(L) {\r\n        // console.log('AddressInput.vue createLeafletElement is running')\r\n        // subclass Control to accept an el which gets mounted to the map\r\n        class ControlParent extends L.Control {\r\n          constructor(el, options) {\r\n            super(options);\r\n            this.el = el;\r\n          }\r\n          onAdd() {\r\n            const el = this.el;\r\n\r\n            // keep clicks from hitting the map\r\n            L.DomEvent.disableClickPropagation(el);\r\n            L.DomEvent.disableScrollPropagation(el);\r\n\r\n            return el;\r\n          }\r\n        }\r\n\r\n        const el = this.$el;\r\n        return new ControlParent(el, {\r\n          position: this.position\r\n        });\r\n      },\r\n      parentMounted(parent, props) {\r\n        // console.log('AddressInput.vue parentMounted is running, parent:', parent, 'props:', props);\r\n        const leafletElement = this.createLeafletElement(L);\r\n        this.$leafletElement = leafletElement;\r\n        const map = this.map;\r\n        leafletElement.addTo(map);\r\n      },\r\n      didType: _.debounce(function (e) {\r\n          // console.log('debounce is running');\r\n          if (this.addressAutocompleteEnabled) {\r\n            // console.log('debounce is running, e:', e, 'this:', this);\r\n            if (e.key === \"ArrowDown\") {\r\n              document.getElementById('address-candidate-list-0').focus();\r\n              return;\r\n            }\r\n            const { value } = e.target;\r\n            this.getCandidates(value);\r\n            this.$store.commit('setAddressEntered', value);\r\n            if (e.key !== \"Enter\") {\r\n              this.$store.commit('setShouldShowAddressCandidateList', true);\r\n            }\r\n          }\r\n        }, 300\r\n      ),\r\n      getCandidates(address) {\r\n        // console.log('getCandidates is running, address:', address);\r\n        axios.get('https://cqvfg1pm72.execute-api.us-east-1.amazonaws.com/dev/first-api-test/', {\r\n          params: {\r\n            address,\r\n          },\r\n        })\r\n          .then(this.didGetCandidates)\r\n          .catch(this.didGetCandidatesError);\r\n      },\r\n      didGetCandidates(res) {\r\n        const { matches } = res.data;\r\n        // console.log('matches:', matches, 'matches map:', matches.map(x => x.address));\r\n        const matchesArray = matches.map(x => x.address);\r\n        this.$store.commit('setCandidates', matchesArray);\r\n      },\r\n      didGetCandidatesError(err) {\r\n        console.log('error getting candidates', err);\r\n        this.$store.commit('setCandidates', []);\r\n      },\r\n      handleFormX() {\r\n        this.$store.commit('setAddressEntered', '');\r\n        this.$store.commit('setShouldShowAddressCandidateList', false);\r\n        this.$store.commit('setCandidates', []);\r\n      },\r\n      handleSearchFormSubmit() {\r\n        // const value = e.target[0].value;\r\n        // const value = this.addressEntered;\r\n        let value;\r\n        if (this.addressAutocompleteEnabled){\r\n          value = this.$store.state.addressEntered;\r\n        } else {\r\n          value = $('#pvm-search-control-input').val();\r\n        }\r\n        console.log('AddressInput.vue handleSearchFormSubmit is running, value:', value);\r\n        // console.log('handleSearchFormSubmit value:', value);\r\n        this.$controller.handleSearchFormSubmit(value);\r\n        this.$store.commit('setAddressEntered', value);\r\n        // this.$store.commit('setShouldShowAddressCandidateList', false);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.pvm-search-control-container {\r\n  height: 48px;\r\n  border-radius: 2px;\r\n  box-shadow:0 2px 4px rgba(0,0,0,0.2),0 -1px 0px rgba(0,0,0,0.02);\r\n}\r\n\r\n.pvm-search-control-container-mobile {\r\n  height: 38px;\r\n  border-radius: 2px;\r\n  box-shadow:0 2px 4px rgba(0,0,0,0.2),0 -1px 0px rgba(0,0,0,0.02);\r\n}\r\n\r\n.pvm-search-control-form {\r\n  display: inline-block;\r\n}\r\n\r\n/* .pvm-search-clear-button {\r\n  display: inline-block;\r\n  color: #fff;\r\n  width: 50px;\r\n  background: #2176d2;\r\n  line-height: 48px;\r\n  padding: 0px;\r\n} */\r\n\r\n.pvm-search-control-button {\r\n  display: inline-block;\r\n  color: #fff;\r\n  width: 50px;\r\n  background: #2176d2;\r\n  line-height: 48px;\r\n  padding: 0px;\r\n}\r\n\r\n.pvm-search-control-button-mobile {\r\n  display: inline-block;\r\n  color: #fff;\r\n  width: 38px;\r\n  height: 38px;\r\n  background: #2176d2;\r\n  line-height: 38px;\r\n  padding: 0px;\r\n  padding-top: 1px;\r\n}\r\n\r\n.pvm-search-control-input {\r\n  display: inline-block;\r\n  border: 0;\r\n  padding: 15px;\r\n  font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n  font-size: 16px;\r\n  width: 250px;\r\n}\r\n\r\n.pvm-search-control-input-full {\r\n  border: 0;\r\n  padding: 15px;\r\n  font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n  font-size: 16px;\r\n  width: 197px;\r\n}\r\n\r\n.pvm-search-control-input-mobile {\r\n  display: inline-block;\r\n  border: 0;\r\n  padding: 15px;\r\n  font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n  font-size: 16px;\r\n  width: 250px;\r\n  height: 38px;\r\n}\r\n\r\n.pvm-search-control-input-mobile-full {\r\n  border: 0;\r\n  padding: 15px;\r\n  font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n  font-size: 16px;\r\n  width: 209px;\r\n  height: 38px;\r\n}\r\n\r\n/*small*/\r\n@media screen and (max-width: 39.9375em) {\r\n  .pvm-search-control-input {\r\n    width: 200px;\r\n  }\r\n\r\n  .pvm-search-control-input-mobile {\r\n    width: 200px;\r\n  }\r\n\r\n  .pvm-search-control-input-full {\r\n    width: 147px;\r\n  }\r\n\r\n  .pvm-search-control-input-mobile-full {\r\n    width: 158px;\r\n  }\r\n\r\n}\r\n\r\n</style>\r\n","<template>\r\n  <div :class=\"this.listGroupClass\"\r\n       v-show=\"this.shouldShowAddressCandidateList\"\r\n  >\r\n    <ul>\r\n      <li v-for=\"(candidate, i) in candidates\">\r\n        <a :href=\"createLink(candidate)\"\r\n           @click=\"closeAddressCandidateList(candidate)\"\r\n           class=\"list-group-item\"\r\n           tabindex=\"-1\"\r\n           :id=\"'address-candidate-list-' + i\"\r\n           @keydown=\"maybeUsedArrow\"\r\n        >\r\n          {{ candidate }}\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import * as L from 'leaflet';\r\n\r\n  export default {\r\n    props: ['position'],\r\n    computed: {\r\n      map() {\r\n        return this.$store.state.map.map;\r\n      },\r\n      candidates() {\r\n        return this.$store.state.candidates;\r\n      },\r\n      shouldShowAddressCandidateList() {\r\n        return this.$store.state.shouldShowAddressCandidateList;\r\n      },\r\n      activeTopic() {\r\n        return this.$store.state.activeTopic;\r\n      },\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n      listGroupClass() {\r\n        if (this.isMobileOrTablet) {\r\n          if (this.addressAutocompleteEnabled) {\r\n            if (this.addressEntered === '' || this.addressEntered === null) {\r\n              return 'list-group-mobile';\r\n            } else {\r\n              return 'list-group-mobile-full';\r\n            }\r\n          } else {\r\n            return 'list-group-mobile';\r\n          }\r\n        } else {\r\n          if (this.addressAutocompleteEnabled) {\r\n            if (this.addressEntered === '' || this.addressEntered === null) {\r\n              return 'list-group';\r\n            } else {\r\n              return 'list-group-full';\r\n            }\r\n          } else {\r\n            return 'list-group';\r\n          }\r\n        }\r\n      },\r\n      addressAutocompleteEnabled() {\r\n        // TODO this is temporarily disabled\r\n        if (this.$config.addressInput) {\r\n          if (this.$config.addressInput.autocompleteEnabled === true) {\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n    },\r\n    watch: {\r\n      shouldShowAddressCandidateList(nextValue) {\r\n        // console.log('AddressCandidateList.vue watch shouldShowAddressCandidateList is running, nextValue:', nextValue);\r\n        if (nextValue === true) {\r\n          this.createControl();\r\n        }\r\n      },\r\n    },\r\n    methods: {\r\n      createLink(candidate) {\r\n        if (this.$store.state.activeTopic) {\r\n          return '#/' + candidate + '/' + this.activeTopic;\r\n        } else {\r\n          return '#/' + candidate;\r\n        }\r\n      },\r\n      createLeafletElement(L) {\r\n        // console.log('AddressCandidateList.vue createLeafletElement is running')\r\n        // subclass Control to accept an el which gets mounted to the map\r\n        class ControlParent extends L.Control {\r\n          constructor(el, options) {\r\n            super(options);\r\n            this.el = el;\r\n          }\r\n          onAdd() {\r\n            const el = this.el;\r\n\r\n            // keep clicks from hitting the map\r\n            L.DomEvent.disableClickPropagation(el);\r\n            L.DomEvent.disableScrollPropagation(el);\r\n\r\n            return el;\r\n          }\r\n        }\r\n\r\n        const el = this.$el;\r\n        return new ControlParent(el, {\r\n          position: this.position\r\n        });\r\n      },\r\n      createControl() {\r\n        // console.log('AddressCandidateList.vue createControl is running');\r\n        const leafletElement = this.createLeafletElement(L);\r\n        this.$leafletElement = leafletElement;\r\n        const map = this.map;\r\n        leafletElement.addTo(map);\r\n      },\r\n      parentMounted(parent, props) {\r\n        // console.log('AddressCandidateList.vue parentMounted is running, parent:', parent, 'props:', props);\r\n      },\r\n      maybeUsedArrow(e) {\r\n        const id = e.target.id;\r\n        const index = parseInt(id.substring(id.lastIndexOf('-') + 1));\r\n        let indexUp, indexDown;\r\n        if (index < this.candidates.length - 1) {\r\n          indexUp = index + 1;\r\n        } else (\r\n          indexUp = index\r\n        )\r\n        if (index !== 0) {\r\n          indexDown = index - 1;\r\n        } else {\r\n          indexDown = 0\r\n        }\r\n        // console.log('maybeUsedArrow running, e:', e, 'index:', index, 'indexUp:', indexUp, 'indexDown:', indexDown);\r\n        if (e.key === \"ArrowDown\") {\r\n          document.getElementById('address-candidate-list-' + indexUp).focus();\r\n        }\r\n        if (e.key === \"ArrowUp\") {\r\n          document.getElementById('address-candidate-list-' + indexDown).focus();\r\n        }\r\n      },\r\n      closeAddressCandidateList(addressCandidate) {\r\n        // console.log('closeAddressCandidateList, addressCandidate:', addressCandidate);\r\n        // this.$controller.handleSearchFormSubmit(addressCandidate);\r\n        this.$store.commit('setAddressEntered', addressCandidate);\r\n        this.$store.commit('setShouldShowAddressCandidateList', false);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.list-group {\r\n  height: 300px;\r\n  width: 250px;\r\n  overflow: auto;\r\n  margin-top: 1px !important;\r\n}\r\n\r\n.list-group-full {\r\n  height: 300px;\r\n  width: 197px;\r\n  overflow: auto;\r\n  margin-top: 1px !important;\r\n}\r\n\r\n.list-group-mobile {\r\n  height: 300px;\r\n  width: 250px;\r\n  overflow: auto;\r\n  margin-top: 1px !important;\r\n}\r\n\r\n.list-group-mobile-full {\r\n  height: 300px;\r\n  width: 197px;\r\n  overflow: auto;\r\n  margin-top: 1px !important;\r\n}\r\n\r\nul {\r\n  list-style-type: none;\r\n  margin-left: 0px;\r\n}\r\n\r\n.list-group-item {\r\n  /* width: 237px; */\r\n  display: block;\r\n  border-radius: 2px;\r\n  box-shadow:0 2px 4px rgba(0,0,0,0.2),0 -1px 0px rgba(0,0,0,0.02);\r\n  border: 2;\r\n  background-color: white;\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n  padding-left: 10px;\r\n  font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n}\r\n\r\n.list-group-item:hover {\r\n  background-color: #ffefa2;\r\n  font-weight: bold;\r\n}\r\n\r\n/*small*/\r\n@media screen and (max-width: 39.9375em) {\r\n  .list-group {\r\n    width: 200px;\r\n  }\r\n\r\n  .list-group-mobile {\r\n    width: 200px;\r\n  }\r\n\r\n  .list-group-full {\r\n    width: 147px;\r\n  }\r\n\r\n  .list-group-mobile-full {\r\n    width: 158px;\r\n  }\r\n}\r\n\r\n</style>\r\n","<script>\r\n  import { Marker } from 'leaflet';\r\n  import VectorIcon from 'leaflet-vector-icon';\r\n\r\n  export default {\r\n    props: [\r\n      'latlng',\r\n      'markerColor',\r\n      'icon'\r\n    ],\r\n    render(h) {\r\n      const a = this.$props.latlng;\r\n      return;\r\n    },\r\n    mounted() {\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map.map;\r\n\r\n      // REVIEW kind of hacky/not reactive?\r\n      if (map) {\r\n        leafletElement.addTo(map);\r\n      }\r\n    },\r\n    updated() {\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map.map;\r\n\r\n      // REVIEW kind of hacky/not reactive?\r\n      if (map) {\r\n        leafletElement.addTo(map);\r\n      }\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        const icon = new VectorIcon({\r\n          icon:  this.$props.icon || 'circle',\r\n          markerColor: this.$props.markerColor || '#2176d2',\r\n        });\r\n        // const icon = {};\r\n\r\n        return new Marker(this.latlng, { icon });\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      },\r\n    },\r\n  };\r\n</script>\r\n","<!--\r\n  wraps Leaflet.vector-markers as a vue component\r\n  https://github.com/hiasinho/Leaflet.vector-markers\r\n-->\r\n\r\n<script>\r\n  import * as L from 'leaflet';\r\n\r\n  export default {\r\n    props: [\r\n      'icon',\r\n      'latlng',\r\n      'rotationAngle'\r\n    ],\r\n    render(h) {\r\n      // for some reason, the react prop that `this.orientation` depends on has\r\n      // to be evaluated once in order to receive updates.\r\n      // this.orientation;\r\n\r\n      return;\r\n    },\r\n    mounted() {\r\n      var proto_initIcon = L.Marker.prototype._initIcon;\r\n      var proto_setPos = L.Marker.prototype._setPos;\r\n\r\n      var oldIE = (L.DomUtil.TRANSFORM === 'msTransform');\r\n\r\n      L.Marker.addInitHook(function () {\r\n          var iconOptions = this.options.icon && this.options.icon.options;\r\n          var iconAnchor = iconOptions && this.options.icon.options.iconAnchor;\r\n          if (iconAnchor) {\r\n              iconAnchor = (iconAnchor[0] + 'px ' + iconAnchor[1] + 'px');\r\n          }\r\n          this.options.rotationOrigin = this.options.rotationOrigin || iconAnchor || 'center bottom' ;\r\n          this.options.rotationAngle = this.options.rotationAngle || 0;\r\n\r\n          // Ensure marker keeps rotated during dragging\r\n          this.on('drag', function(e) { e.target._applyRotation(); });\r\n      });\r\n\r\n      L.Marker.include({\r\n          _initIcon: function() {\r\n              proto_initIcon.call(this);\r\n          },\r\n\r\n          _setPos: function (pos) {\r\n              proto_setPos.call(this, pos);\r\n              this._applyRotation();\r\n          },\r\n\r\n          _applyRotation: function () {\r\n              if(this.options.rotationAngle) {\r\n                  this._icon.style[L.DomUtil.TRANSFORM+'Origin'] = this.options.rotationOrigin;\r\n\r\n                  if(oldIE) {\r\n                      // for IE 9, use the 2D rotation\r\n                      this._icon.style[L.DomUtil.TRANSFORM] = 'rotate(' + this.options.rotationAngle + 'deg)';\r\n                  } else {\r\n                      // for modern browsers, prefer the 3D accelerated version\r\n                      this._icon.style[L.DomUtil.TRANSFORM] += ' rotateZ(' + this.options.rotationAngle + 'deg)';\r\n                  }\r\n              }\r\n          },\r\n\r\n          setRotationAngle: function(angle) {\r\n              this.options.rotationAngle = angle;\r\n              this.update();\r\n              return this;\r\n          },\r\n\r\n          setRotationOrigin: function(origin) {\r\n              this.options.rotationOrigin = origin;\r\n              this.update();\r\n              return this;\r\n          }\r\n      });\r\n\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map.map;\r\n\r\n      // REVIEW kind of hacky/not reactive?\r\n      if (map) {\r\n        leafletElement.addTo(map);\r\n      }\r\n    },\r\n    destroyed() {\r\n      //console.log('pngMarker destroyed fired, latlng is', this.latlng);\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    watch: {\r\n      rotationAngle(nextRotationAngle) {\r\n        // console.log('pngMarker orientation changed', nextRotationAngle);\r\n        this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n        const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n        const map = this.$store.state.map.map;\r\n\r\n        // REVIEW kind of hacky/not reactive?\r\n        if (map) {\r\n          leafletElement.addTo(map);\r\n        }\r\n      },\r\n      latlng(nextLatLng) {\r\n        // console.log('pngMarker orientation changed', nextRotationAngle);\r\n        this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n        const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n        const map = this.$store.state.map.map;\r\n\r\n        // REVIEW kind of hacky/not reactive?\r\n        if (map) {\r\n          leafletElement.addTo(map);\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        // console.log('pngMarker createLeafletElement is running');\r\n\r\n        const icon = L.icon({\r\n            iconUrl: this.icon,\r\n            iconSize: [26, 16],\r\n            iconAnchor: [11, 8],\r\n          })\r\n\r\n        // console.log('createLeafletElement is running, this.latlng:', this.latlng);\r\n        return L.marker(this.latlng, {\r\n          icon: icon,\r\n          rotationAngle: this.rotationAngle,\r\n        });\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n","<template>\r\n  <div class=\"leaflet-bar easy-button-container leaflet-control\">\r\n    <button @click=\"handleImageryToggleButtonClick\">\r\n      <span class=\"button-state state-unnamed-state unnamed-state-active\">\r\n        <img class=\"button-image\" :src=\"toggleButtonImgSrc\">\r\n      </span>\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Control from '../leaflet/Control.vue';\r\n\r\n  const {props, methods} = Control;\r\n\r\n  export default {\r\n    props: [\r\n      'position'\r\n    ],\r\n    computed: {\r\n      toggleButtonImgSrc() {\r\n        const shouldShowImagery = this.$store.state.map.shouldShowImagery;\r\n        let src;\r\n        if (shouldShowImagery) {\r\n          src = \"../src/assets/basemap_small.png\"\r\n        }\r\n        else {\r\n          src = \"../src/assets/imagery_small.png\"\r\n        }\r\n        return src;\r\n      },\r\n    },\r\n    methods: Object.assign(methods, {\r\n      handleImageryToggleButtonClick(e) {\r\n        // document.getElementById('addressSearch').blur();\r\n        const prevShouldShowImagery = this.$store.state.map.shouldShowImagery;\r\n        const nextShouldShowImagery = !prevShouldShowImagery;\r\n        this.$store.commit('setShouldShowImagery', nextShouldShowImagery);\r\n      },\r\n    })\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .button-image {\r\n    vertical-align: top;\r\n  }\r\n</style>\r\n","<template>\r\n  <div v-show=\"shouldShowImagery\">\r\n    <select id=\"year-select\" @change=\"handleImageryChange\">\r\n      <optgroup v-for=\"(imageryTypeDef, imageryType) in imageryTypes\"\r\n                :label=\"imageryTypeDef.label\">\r\n        <option v-for=\"basemap in basemapsForImageryType(imageryType)\"\r\n                :data-key=\"basemap.key\"\r\n        >\r\n          {{ basemap.label }}\r\n        </option>\r\n      </optgroup>\r\n    </select>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Control from '../leaflet/Control.vue';\r\n  const {props, methods} = Control;\r\n\r\n  export default {\r\n    props: [\r\n      'position',\r\n    ],\r\n    computed: {\r\n      shouldShowImagery() {\r\n        return this.$store.state.map.shouldShowImagery;\r\n      },\r\n      imageryTypes() {\r\n        return this.$config.map.imageryTypes;\r\n      },\r\n      currentImagery() {\r\n        return this.$store.state.map.imagery;\r\n      },\r\n    },\r\n    watch: {\r\n      currentImagery(nextCurrentImagery) {\r\n        const nextYear = nextCurrentImagery.replace(/\\D/g,'');\r\n        const el = document.getElementById('year-select');\r\n        el.value = nextYear;\r\n      }\r\n    },\r\n    methods: Object.assign(methods, {\r\n      handleImageryChange() {\r\n        const el = document.getElementById('year-select');\r\n        const group = el.options[el.selectedIndex].parentElement.label;\r\n        const year = el.options[el.selectedIndex].value;\r\n        const nextBasemap = group.toLowerCase() + year;\r\n\r\n        this.$store.commit('setImagery', nextBasemap);\r\n      },\r\n      // returns keys of basemaps of a certain type (e.g. historic, imagery)\r\n      basemapsForImageryType(targetType) {\r\n        const basemapConfig = this.$config.map.basemaps;\r\n        const basemapKeys = Object.keys(basemapConfig);\r\n        const basemaps = [];\r\n\r\n        for (let basemapKey of basemapKeys) {\r\n          const basemapDef = basemapConfig[basemapKey];\r\n          const basemapType = basemapDef.type;\r\n\r\n          if (basemapType === targetType) {\r\n            const basemapLabel = basemapDef.label;\r\n            basemaps.push({\r\n              type: basemapType,\r\n              label: basemapLabel\r\n            })\r\n          }\r\n        }\r\n        return basemaps;\r\n      }\r\n    })\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","<template>\r\n  <div id=\"toggle-tab\"\r\n       class=\"toggle-tab\"\r\n       :style=\"{ top: buttonPosition }\"\r\n       @click=\"handleFullScreenMapToggleButtonClick\"\r\n       v-if=\"!this.isMobileOrTablet\"\r\n  >\r\n    <span class=\"align-span\">\r\n      <i :class='this.currentIcon'></i>\r\n    </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        'divHeight': 0,\r\n        'buttonPosition': 0,\r\n      }\r\n    },\r\n    mounted() {\r\n      window.addEventListener('resize', this.setDivHeight);\r\n      this.setDivHeight();\r\n    },\r\n    computed: {\r\n      fullScreenMapEnabled() {\r\n        return this.$store.state.fullScreenMapEnabled;\r\n      },\r\n      fullScreenTopicsEnabled() {\r\n        return this.$store.state.fullScreenTopicsEnabled;\r\n      },\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n      cyclomediaActive() {\r\n        return this.$store.state.cyclomedia.active;\r\n      },\r\n      pictometryActive() {\r\n        return this.$store.state.pictometry.active;\r\n      },\r\n      picOrCycloActive() {\r\n        if (this.cyclomediaActive || this.pictometryActive) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      currentIcon() {\r\n        if (this.fullScreenMapEnabled) {\r\n          return 'fa fa-caret-right fa-2x'\r\n        } else {\r\n          return 'fa fa-caret-left fa-2x'\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      picOrCycloActive(value) {\r\n        // console.log('FullScreenMapToggleTab watch picOrCycloActive, value:', value);\r\n        this.setDivHeight();\r\n        // this.$nextTick(() => {\r\n        //   this.$store.state.map.map.invalidateSize();\r\n        // })\r\n      },\r\n      fullScreenTopicsEnabled() {\r\n        this.setDivHeight();\r\n      }\r\n    },\r\n    methods: {\r\n      setDivHeight() {\r\n        // console.log('FullScreenMapToggleTab setDivHeight is running');\r\n        const el = document.getElementById('map-tag');\r\n        const divStyle = window.getComputedStyle(el);\r\n        const divHeight = parseFloat(divStyle.getPropertyValue('height').replace('px', ''));\r\n        this.buttonPosition = (divHeight-48)/2 + 'px';\r\n      },\r\n      handleFullScreenMapToggleButtonClick(e) {\r\n        const prevFullScreenMapEnabled = this.$store.state.fullScreenMapEnabled;\r\n        const nextFullScreenMapEnabled = !prevFullScreenMapEnabled;\r\n        this.$store.commit('setFullScreenMapEnabled', nextFullScreenMapEnabled);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  /* .toggle-tab {\r\n    position: absolute;\r\n    left: 0px;\r\n    border-width: 1.3px;\r\n    border-color: #CAC9C9;\r\n    height: 48px;\r\n    line-height: 58px;\r\n    width:24px;\r\n    background-color: white;\r\n    display: inline-block;\r\n    z-index: 500; */\r\n    /* border-left-style: solid; */\r\n    /* box-shadow: 2px 2px 7px grey; */\r\n  /* } */\r\n\r\n  .toggle-tab {\r\n    display: none;\r\n  }\r\n\r\n  .align-span {\r\n    margin-left: 6px;\r\n  }\r\n\r\n  @media screen and (min-width: 46.875em) {\r\n    .toggle-tab {\r\n      position: absolute;\r\n      left: 0px;\r\n      border-width: 1.3px;\r\n      border-style: solid;\r\n      border-color: #CAC9C9;\r\n      height: 48px;\r\n      line-height: 56px;\r\n      width:24px;\r\n      background-color: white;\r\n      display: inline-block;\r\n      z-index: 500;\r\n      opacity: 0.7;\r\n      /* border-left-style: solid; */\r\n      /* box-shadow: 2px 2px 7px grey; */\r\n    }\r\n  }\r\n\r\n</style>\r\n","<template>\r\n  <div class=\"leaflet-bar easy-button-container leaflet-control\">\r\n    <button @click=\"handleLocationButtonClick\">\r\n      <span class=\"button-state state-unnamed-state unnamed-state-active\">\r\n        <i class=\"fa fa-dot-circle-o fa-lg\" aria-hidden=\"true\"></i>\r\n      </span>\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Control from '../leaflet/Control.vue';\r\n  import L from 'leaflet';\r\n\r\n  const {props, methods} = Control;\r\n\r\n  export default {\r\n    props: [\r\n      'position'\r\n    ],\r\n    data() {\r\n      return {\r\n        locationOn: false\r\n      }\r\n    },\r\n    methods: Object.assign(methods, {\r\n\r\n      handleLocationButtonClick(e) {\r\n        // document.getElementById('addressSearch').blur()\r\n        // alert('handleLocationButtonClick is running');\r\n        const watchPositionOn = this.$store.state.map.watchPositionOn;\r\n        // console.log('watchPositionOn', watchPositionOn);\r\n        if (!watchPositionOn) {\r\n          this.$store.commit('setWatchPositionOn', true);\r\n          navigator.geolocation.watchPosition(this.geofindSuccess, this.geofindError, {enableHighAccuracy: true, timeout: 1000, maximumAge: 0, distanceFilter: 5});\r\n        } else {\r\n          this.moveToPosition();\r\n        }\r\n      },\r\n      geofindSuccess(position) {\r\n        // alert('geofindSuccess is running, position:', position);\r\n        const payload = {\r\n          lat: position.coords.latitude,\r\n          lng: position.coords.longitude\r\n        }\r\n        this.$store.commit('setLocation', payload);\r\n        // console.log('latitude', payload.lat, 'longitude', payload.lng);\r\n        if (!this.locationOn) {\r\n          this.moveToPosition();\r\n          this.locationOn = true;\r\n        }\r\n      },\r\n      moveToPosition() {\r\n        const map = this.$store.state.map.map;\r\n        const location = this.$store.state.map.location;\r\n        // console.log('LocationControl.vue moveToPosition is running, location:', location);\r\n        map.setView([location.lat, location.lng], 19);\r\n      },\r\n      geofindError() {\r\n        console.log('GeofindError')\r\n      }\r\n    })\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  .fa-lg {\r\n    vertical-align: -10%;\r\n  }\r\n\r\n</style>\r\n","<script>\r\n  import MeasureControl from 'leaflet-measure';\r\n  // import 'leaflet-measure/dist/leaflet-measure.css';\r\n\r\n  export default {\r\n    props: ['position'],\r\n    mounted() {\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeControl(this.$leafletElement);\r\n    },\r\n    render(h) {\r\n      return;\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        const { position } = this.$props;\r\n\r\n        return new MeasureControl({\r\n  \t\t\t\tposition,\r\n  \t\t\t\tprimaryLengthUnit: 'feet',\r\n  \t\t\t\tprimaryAreaUnit: 'sqfeet',\r\n  \t\t\t});\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        map.addControl(this.$leafletElement);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","<template>\r\n  <div v-show=\"this.shouldShowLegend\">\r\n    <div class='legend'>\r\n      <ul class='legend-list'>\r\n        <li v-for='key in this.keys'\r\n            class='legend-listitem'\r\n            :style='\"font-size:\"+items[key][\"font-size\"]+\";\"'\r\n        >\r\n          <div class='legend-box'\r\n             :style='\"background-color:\"+items[key][\"background-color\"]+\r\n             \"; border-color:\"+items[key][\"border-color\"]+\r\n             \"; border-style:\"+items[key][\"border-style\"]+\r\n             \"; border-width:\"+items[key][\"border-weight\"]+\r\n             \"; width:\"+items[key].width+\r\n             \"; height:\"+items[key].height+\";\"'\r\n          />\r\n          <div class='list-text'>\r\n            {{key}}\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Control from '../leaflet/Control.vue';\r\n  const {props, methods} = Control;\r\n\r\n  export default {\r\n    props: [\r\n      'position',\r\n      'options',\r\n      'items'\r\n    ],\r\n    computed: {\r\n      keys() {\r\n        return Object.keys(this.$props.items);\r\n      },\r\n      activeTopic() {\r\n        return this.$store.state.activeTopic;\r\n      },\r\n      shouldShowImagery() {\r\n        return this.$store.state.map.shouldShowImagery;\r\n      },\r\n      shouldShowLegend() {\r\n        let result = true;\r\n        if (!this.$props.options.topics.includes(this.activeTopic)) {\r\n          result = false;\r\n        }\r\n        if (this.$props.options.showWithBaseMapOnly) {\r\n          if (this.shouldShowImagery) {\r\n            result = false;\r\n          }\r\n        }\r\n        return result;\r\n      }\r\n      // style() {\r\n      //   // const string = \"background: \" + this.$props.items[key].background + \" color: \" + this.$props.items[key].color\r\n      //   const string = this.$props.items[]\r\n      //   console.log('style string', string);\r\n      //   return string\r\n      // }\r\n    },\r\n    methods: Object.assign(methods)\r\n  };\r\n</script>\r\n\r\n<style>\r\n.legend {\r\n  display: inline-block;\r\n  padding: 6px 8px;\r\n  font: 14px/16px Arial, Helvetica, sans-serif;\r\n  background: white;\r\n  background: rgba(255,255,255,1);\r\n  box-shadow: 0 0 15px rgba(0,0,0,0.2);\r\n  border-radius: 5px;\r\n  line-height: 18px;\r\n  color: #555;\r\n}\r\n\r\n.legend-box {\r\n  display: inline-block;\r\n  width: 18px;\r\n  height: 18px;\r\n  opacity: 1;\r\n  vertical-align: middle;\r\n  margin-right: 4px;\r\n}\r\n\r\n.list-text {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n}\r\n\r\n.legend-list {\r\n  list-style: none;\r\n  padding-top: 2px;\r\n  padding-left: 2px;\r\n  margin-left: 0px;\r\n  /*override standards*/\r\n  margin-bottom: 0;\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <div :class=\"this.basemap === 'none' ? 'basetooltip': 'basetooltip2'\"\r\n         v-on:mouseover=\"onMouseover\"\r\n         v-on:mouseout=\"onMouseout\"\r\n    >\r\n      <div v-if=\"this.basemap === 'pwd'\">\r\n        The property boundaries displayed on the map are for reference only and may not be used in place of recorded deeds or land surveys. Boundaries are generalized for ease of visualization. Source: Philadelphia Water\r\n      </div>\r\n      <div v-else-if=\"this.basemap === 'dor'\">\r\n        The property boundaries displayed on the map are for reference only and may not be used in place of recorded deeds or land surveys. Dimension lengths are calculated using the GIS feature. Source: Department of Records.\r\n      </div>\r\n      <div v-else>\r\n        i\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Control from '../leaflet/Control.vue';\r\n  const {props, methods} = Control;\r\n\r\n  export default {\r\n    props: [\r\n      'position',\r\n    ],\r\n    data() {\r\n      return {\r\n        'basemap': 'none'\r\n      }\r\n    },\r\n    computed: {\r\n      activeBasemap() {\r\n        return this.$store.state.map.basemap;\r\n      },\r\n      activeTopic() {\r\n        return this.$store.state.activeTopic;\r\n      }\r\n    },\r\n    methods: Object.assign(methods, {\r\n      onMouseover() {\r\n        const stateBasemap = this.activeBasemap;\r\n        let finalBasemap = stateBasemap;\r\n        if (stateBasemap.includes('imagery') || stateBasemap.includes('historic')) {\r\n          if (this.activeTopic === 'deeds' || this.activeTopic === 'zoning') {\r\n            finalBasemap = 'dor'\r\n          } else {\r\n            finalBasemap = 'pwd'\r\n          }\r\n        }\r\n        this.basemap = finalBasemap;\r\n      },\r\n      onMouseout() {\r\n        this.basemap = 'none';\r\n      }\r\n    })\r\n  };\r\n</script>\r\n\r\n<style>\r\n.basetooltip {\r\n  width: 32px;\r\n  height: 32px;\r\n  padding: 5px 13px;\r\n  font: 20px/22px Arial, Helvetica, sans-serif;\r\n  background: white;\r\n  background: rgba(255,255,255,1);\r\n  box-shadow: 0 0 15px rgba(0,0,0,0.2);\r\n  border-radius: 5px;\r\n}\r\n\r\n.basetooltip2 {\r\n  float: right;\r\n  width: 80%;\r\n  height: 32px;\r\n  padding: 3px 10px;\r\n  padding-right: 40px;\r\n  font: 12px/14px Arial, Helvetica, sans-serif;\r\n  background: white;\r\n  background: rgba(255,255,255,1);\r\n  box-shadow: 0 0 15px rgba(0,0,0,0.2);\r\n  border-radius: 5px;\r\n}\r\n\r\n.basetooltip a {\r\n  color: black\r\n}\r\n\r\n.basetooltip2 a {\r\n  color: black\r\n}\r\n\r\n</style>\r\n","<template>\r\n  <!-- <section :class=\"['openmaps-about' ,'openmaps-modal', {'openmaps-modal--open': modals.about.open}]\" -->\r\n  <section :class=\"['openmaps-about' ,'openmaps-modal']\"\r\n           v-show=\"modals.help.open\">\r\n    <div @click=\"closeModal\" class=\"openmaps-modal-close\">\r\n      <span class=\"button-state state-unnamed-state unnamed-state-active\">\r\n        <i class=\"fa fa-times fa-lg\" aria-hidden=\"true\"></i>\r\n      </span>\r\n    </div>\r\n    <h2 class=\"text-center \"><b>How to use OpenMaps</b></h2>\r\n    <div class=\"openmaps-modal-content\">\r\n      <!-- <p>Turn on a layer</p> -->\r\n      <div class=\"tour-tip\" @mouseover=\"highlight('.openmaps-category-card')\" @mouseleave=\"removeHighlight('.openmaps-category-card')\">\r\n        <div class=\"icon-div\">\r\n          <span>\r\n            <i class=\"fa fa-filter fa-3x\" aria-hidden=\"true\"></i>\r\n          </span>\r\n        </div>\r\n        <div class=\"text-div\">\r\n          <p class=\"tour-tip__action\"><b>Filter the list of layers available in the left panel.</b></p>\r\n          <p class=\"tour-tip__result text-nopad\">Type in the box for the first filter to filter by text.  Select a category from the second filter to filter by category.</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"tour-tip\" @mouseover=\"highlight('.label-text')\" @mouseleave=\"removeHighlight('.label-text')\">\r\n        <div class=\"icon-div\">\r\n          <span>\r\n            <i class=\"fa fa-check-square fa-3x\" aria-hidden=\"true\"></i>\r\n          </span>\r\n        </div>\r\n        <div class=\"text-div\">\r\n          <p class=\"tour-tip__action\"><b>Toggle on and off map layers by clicking on the checkboxes in the layer panel.</b></p>\r\n          <p class=\"tour-tip__result text-nopad\">You can toggle on as many layers as you want, and they will all show on the map.</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"tour-tip\" @mouseover=\"highlight('.label-text')\" @mouseleave=\"removeHighlight('.label-text')\">\r\n        <div class=\"icon-div\">\r\n          <span>\r\n            <i class=\"fa fa-square-o fa-3x\" aria-hidden=\"true\"></i>\r\n          </span>\r\n        </div>\r\n        <div class=\"text-div\">\r\n          <p class=\"tour-tip__action\"><b>If a checkbox is grayed out, zoom in further on the map and it will become active.</b></p>\r\n          <p class=\"tour-tip__result text-nopad\">Many of the layers will not show when the map is zoomed out too far.</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"tour-tip\" @mouseover=\"highlight('.label-text')\" @mouseleave=\"removeHighlight('.label-text')\">\r\n        <div class=\"icon-div\">\r\n          <span>\r\n            <i class=\"fa fa-map-marker fa-3x\" aria-hidden=\"true\"></i>\r\n          </span>\r\n        </div>\r\n        <div class=\"text-div\">\r\n          <p class=\"tour-tip__action\"><b>Click on any feature that appears on the map to get a popup with that feature's info.</b></p>\r\n          <p class=\"tour-tip__result text-nopad\">If you have turned on overlapping layers, you will be able to click through multiple popups of info.</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"tour-tip\" @mouseover=\"highlight('.openmaps-category-card')\" @mouseleave=\"removeHighlight('.openmaps-category-card')\">\r\n        <div class=\"icon-div\">\r\n          <span>\r\n            <i class=\"fa fa-search fa-3x\" aria-hidden=\"true\"></i>\r\n          </span>\r\n        </div>\r\n        <div class=\"text-div\">\r\n          <p class=\"tour-tip__action\"><b>Search for an address or intersection.</b></p>\r\n        <p class=\"tour-tip__result text-nopad\">The map will move to the location that you have searched</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"tour-tip\" @mouseover=\"highlight('.openmaps-category-card')\" @mouseleave=\"removeHighlight('.openmaps-category-card')\">\r\n        <div class=\"icon-div\">\r\n          <span>\r\n            <img class=\"street-view-image\" :src=\"'../../src/assets/cyclomedia_blue.png'\">\r\n          </span>\r\n          <!-- <span>\r\n            <i class=\"fa fa-search fa-3x\" aria-hidden=\"true\"></i>\r\n          </span> -->\r\n        </div>\r\n        <div class=\"text-div\">\r\n          <p class=\"tour-tip__action\"><b>Toggle on and off street view</b></p>\r\n        <p class=\"tour-tip__result text-nopad\">Half of the map panel will be taken up by the street view. If you are zoomed in far enough, circles will appear along the streets in the map.  Click on a circle to change the street view location to that point.</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"tour-tip\" @mouseover=\"highlight('.openmaps-category-card')\" @mouseleave=\"removeHighlight('.openmaps-category-card')\">\r\n        <div class=\"icon-div\">\r\n          <span>\r\n            <i class=\"fa fa-info-circle fa-3x\" aria-hidden=\"true\"></i>\r\n          </span>\r\n        </div>\r\n        <div class=\"text-div\">\r\n          <p class=\"tour-tip__action\"><b>Learn more about and download data.</b></p>\r\n        <p class=\"tour-tip__result text-nopad\">Click this icon to be linked to the metadata page for any dataset.</p>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\n// import {mapState} from 'vuex'\r\n// import FontAwesomeIcon from '@fortawesome/vue-fontawesome'\r\n/**\r\n * HOW TO USE THE FINDER MODAL\r\n *\r\n * Hightlights certain elements of the interface on keyword hover.\r\n *\r\n * @since 0.6.22\r\n */\r\nexport default {\r\n\r\n  name: 'Modal-About',\r\n  // components: {FontAwesomeIcon},\r\n  computed: {\r\n    // route() {\r\n    //   return this.$store.state.route;\r\n    // },\r\n    shouldBeOpen() {\r\n      if (this.route === 'help') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    modals() {\r\n      return this.$store.state.modals;\r\n    }\r\n    // ...mapState(['modals'])\r\n  },\r\n  methods: {\r\n    closeModal () {\r\n      const firstLoc = window.location.hash;\r\n      let firstLocArr = firstLoc.split('/').slice(1);\r\n      console.log('firstLocArr:', firstLocArr);\r\n      const helpPos = firstLocArr.indexOf('help');\r\n      firstLocArr = firstLocArr.slice(helpPos+1, helpPos+2);\r\n      console.log('firstLocArr:', firstLocArr);\r\n      let lastHash = '#';\r\n      for (let hashPart of firstLocArr) {\r\n        lastHash = lastHash + '/' + hashPart;\r\n      }\r\n      window.location.hash = lastHash;\r\n      // this.$store.commit('setDidToggleModal', { name: 'help', open: false });\r\n    },\r\n    highlight (selector) {\r\n      let el = document.querySelectorAll(selector)[0]\r\n      // el.classList.add('tour-highlight')\r\n    },\r\n    removeHighlight (selector) {\r\n      let el = document.querySelectorAll(selector)[0]\r\n      // el.classList.remove('tour-highlight')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* <style lang=\"scss\" scoped> */\r\n\r\n.icon-div {\r\n  margin: 10px;\r\n}\r\n\r\n.text-div {\r\n\r\n}\r\n\r\n.street-view-image {\r\n  height: 40px;\r\n  width: 73px;\r\n  color: blue;\r\n}\r\n\r\n.openmaps-modal {\r\n  color: rgb(15, 77, 144);\r\n  width: 97%;\r\n  height: 80%;\r\n  padding: 20px;\r\n  overflow: hidden;\r\n  position: absolute;\r\n  top: 70px;\r\n  left: 10px;\r\n  background: white;\r\n  z-index:1000;\r\n  opacity: 0.85;\r\n}\r\n\r\n/* .modal-content {\r\n  overflow-y: auto;\r\n} */\r\n\r\n.openmaps-modal.openmaps-modal--open{\r\n  z-index:1000;\r\n  /* border-left: 3px solid color(ghost-gray); */\r\n  opacity: 1;\r\n}\r\n\r\n.openmaps-modal-content{\r\n  width: 95%;\r\n  height: 85%;\r\n  margin: 20px auto;\r\n  overflow-y: auto;\r\n}\r\n\r\n.openmaps-modal-close{\r\n  position: absolute;\r\n  top:15px;\r\n  left:15px;\r\n  background: white;\r\n  height: 30px;\r\n  width: 30px;\r\n}\r\n\r\n\r\n/* @include breakpoint(medium down) {\r\n  .openmaps-modal{\r\n    position:fixed;\r\n    width: 100%;\r\n    height:calc(100vh - #{$header-height-mobile});\r\n    left:0;\r\n    top: $header-height-mobile;\r\n    background: $white;\r\n    padding:10%;\r\n  }\r\n  .openmaps-modal-content{\r\n    width: 100%;\r\n  }\r\n  .openmaps-modal-close{\r\n    position: absolute;\r\n    top:15px;\r\n    left:15px;\r\n  }\r\n} */\r\n\r\n</style>\r\n","import $ from 'jquery';\r\nimport axios from 'axios';\r\n\r\nclass RecordingsClient {\r\n\tconstructor(baseUrl, username, password, srid = 3857, proxy) {\r\n\t\tthis.baseUrl = baseUrl;\r\n\t\tthis.username = username;\r\n\t\tthis.password = password;\r\n\t\tthis.srid = srid;\r\n\t\tthis.proxy = proxy;\r\n\t}\r\n\r\n\t// this takes leaflet map bonds and an EPSG coordinate system id, e.g. 3857\r\n\t// and returns an array of cyclomedia recording points\r\n\tgetRecordings(bounds, callback) {\r\n\t\t// console.log('get recordings', bounds);\r\n\r\n\t\tconst swCoord = bounds.getSouthWest();\r\n\t\tconst neCoord = bounds.getNorthEast();\r\n\t\tconst data = `<wfs:GetFeature service=\"WFS\" version=\"1.1.0\" resultType=\"results\" outputFormat=\"text/xml; subtype=gml/3.1.1\" xmlns:wfs=\"http://www.opengis.net/wfs\">\r\n\t\t\t\t\t\t\t\t\t\t\t<wfs:Query typeName=\"atlas:Recording\" srsName=\"EPSG:${this.srid}\" xmlns:atlas=\"http://www.cyclomedia.com/atlas\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ogc:Filter xmlns:ogc=\"http://www.opengis.net/ogc\">\r\n\t\t\t\t\t\t    \t\t\t\t\t<ogc:And>\r\n\t\t\t\t\t\t      \t\t\t\t\t<ogc:BBOX>\r\n\t\t\t\t\t\t\t\t\t\t\t        <gml:Envelope srsName=\"EPSG:${this.srid}\" xmlns:gml=\"http://www.opengis.net/gml\">\r\n\t\t\t\t\t\t\t\t\t\t\t          <gml:lowerCorner>${swCoord.lng} ${swCoord.lat}</gml:lowerCorner>\r\n\t\t\t\t\t\t\t\t\t\t\t          <gml:upperCorner>${neCoord.lng} ${neCoord.lat}</gml:upperCorner>\r\n\t\t\t\t\t\t\t\t\t\t\t        </gml:Envelope>\r\n\t\t\t\t\t\t\t\t\t\t\t      </ogc:BBOX>\r\n\t\t\t\t\t\t\t\t\t\t\t      <ogc:PropertyIsNull>\r\n\t\t\t\t\t\t\t\t\t\t\t        <ogc:PropertyName>expiredAt</ogc:PropertyName>\r\n\t\t\t\t\t\t\t\t\t\t\t      </ogc:PropertyIsNull>\r\n\t\t\t\t\t\t\t\t\t\t\t    </ogc:And>\r\n\t\t\t\t\t\t\t\t\t\t\t  </ogc:Filter>\r\n\t\t\t\t\t\t\t\t\t\t\t </wfs:Query>\r\n\t\t\t\t\t\t\t\t\t\t\t</wfs:GetFeature>`;\r\n\t\tconst url = (this.proxy || '') + this.baseUrl;\r\n\t\t// TEMP\r\n\t\t// const url = ((this.proxy || '') + this.baseUrl).replace('//', 'https://');\r\n\t\tconst self = this;\r\n\r\n\t\t// const params = {\r\n\t\t// \tdata,\r\n\t\t// \t// type: 'POST',\r\n\t\t// \tcontentType: 'text/xml'\r\n\t\t// }\r\n\t\t// const headers = {\r\n\t\t// \t'Content-Type': 'text/xml',\r\n\t\t// \t'Authorization': 'Basic ' + window.btoa(this.username + ':' + this.password)\r\n\t\t// }\r\n\t\t// console.log('headers', headers);\r\n\t\t//\r\n\t\t// axios.get(url, { params, headers }).then(response => {\r\n\r\n\t\t// })\r\n\r\n\t\t$.ajax({\r\n\t    url,\r\n\t    data,\r\n\t    type: 'POST',\r\n\t    contentType: 'text/xml',\r\n\t    // dataType: 'text',\r\n\t\t\theaders: {\r\n\t\t\t\t// 'Content-length': data.length,\r\n\t\t\t\t'Authorization': 'Basic ' + window.btoa(this.username + ':' + this.password)\r\n\t\t\t},\r\n\t    success(data) {\r\n\t\t\t\tconsole.log('got recordings', data);\r\n\r\n\t\t\t\t// const data = response.data\r\n\r\n\t\t\t\t// this is a list of xml elements representing recordings\r\n\t\t\t\tconst recordingElsCollection = data.getElementsByTagNameNS('*', 'Recording');\r\n\t\t\t\tconst recordingEls = [].slice.call(recordingElsCollection);\r\n\r\n\t\t\t\t// check for > 1\r\n\t\t\t\tif (recordingEls.length < 1) {\r\n\t\t\t\t\tconsole.log('no cyclomedia recordings for bounds');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// check if authorized\r\n\t\t\t\t// const firstRecordingEl = recordingEls[0];\r\n\t\t\t\t// const isAuthorizedEls = firstRecordingEl.firstChild.getElementsByTagNameNS('*', 'isAuthorized');\r\n\t\t\t\t// const isAuthorized = isAuthorizedEls.length > 0 && isAuthorizedEls[0].firstChild.data === 'true';\r\n\t\t\t\t// if (!isAuthorized) {\r\n\t\t\t\t// \tthrow 'not authorized to get cyclomedia recordings';\r\n\t\t\t\t// \treturn;\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tconst recordings = recordingEls.map(recordingEl => {\r\n\t\t\t\t\tconst imageId = recordingEl.getElementsByTagNameNS('*', 'imageId')[0].firstChild.data;\r\n\t\t\t\t\tconst coords = recordingEl.getElementsByTagNameNS('*', 'pos')[0].firstChild.data;\r\n\t\t\t\t\tconst [lng, lat] = coords.split(' ').map(parseFloat);\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\timageId,\r\n\t\t\t\t\t\tlng,\r\n\t\t\t\t\t\tlat\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcallback(recordings);\r\n\t\t\t// }, response => {\r\n\t\t\t\t// console.log('AXIOS ERROR recordings-client.js')\r\n\t\t\t},\r\n\t    error(xhr, ajaxOptions, thrownError) {\r\n        console.log(xhr.status);\r\n        console.log(thrownError);\r\n\t    }\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport default RecordingsClient;\r\n","<template>\r\n  <div class=\"leaflet-bar easy-button-container leaflet-control\">\r\n    <button :class=\"this.cyclomediaActive\"\r\n            class=\"cyclomedia-button\"\r\n            @click.prevent=\"handleButtonClick\"\r\n    >\r\n      <span class=\"button-state\">\r\n        <img class=\"button-image\" :src=\"imgSrc\">\r\n      </span>\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Control from '../leaflet/Control.vue';\r\n  import CyclomediaRecordingsClient from './recordings-client';\r\n\r\n  export default {\r\n    extends: Control,\r\n    // TODO figure how to extend props. sometimes it's an obj, sometimes an array.\r\n    // props: Object.assign(props, {\r\n    // }),\r\n    props: [\r\n      'link',\r\n      'imgSrc'\r\n    ],\r\n    created() {\r\n      // create cyclomedia recordings client\r\n      this.$cyclomediaRecordingsClient = new CyclomediaRecordingsClient(\r\n        this.$config.cyclomedia.recordingsUrl,\r\n        this.$config.cyclomedia.username,\r\n        this.$config.cyclomedia.password,\r\n        4326\r\n      );\r\n    },\r\n    computed: {\r\n      cyclomediaInitialized() {\r\n        return this.$store.state.cyclomedia.initialized;\r\n      },\r\n      cyclomediaActive() {\r\n        return this.$store.state.cyclomedia.active ? 'active' : 'inactive'\r\n      }\r\n    },\r\n    methods: {\r\n      handleButtonClick(e) {\r\n        if (!this.cyclomediaInitialized) {\r\n          this.$store.commit('setCyclomediaInitialized', true);\r\n        }\r\n        const willBeActive = !this.$store.state.cyclomedia.active;\r\n\r\n        this.$store.commit('setCyclomediaActive', willBeActive);\r\n\r\n        // if the cyclo viewer is off screen when it loads imagery, it won't\r\n        // show anything even once it's on screen. use this to trigger an\r\n        // update.\r\n\r\n        // const viewer = this.$store.state.cyclomedia.viewer;\r\n        //\r\n        // if (willBeActive && viewer) {\r\n        //   this.$nextTick(() => {\r\n        //     viewer.forceUpdate();\r\n        //   });\r\n        // }\r\n\r\n        // this.$emit('click');\r\n      },\r\n      // setNewLocation(latlng) {\r\n      //   const viewer = this.$store.state.cyclomedia.viewer;\r\n      //   const xy = [latlng.lng, latlng.lat];\r\n      //   viewer.openByCoordinate(xy);\r\n      // },\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  .inactive {\r\n    background-color: #ffffff;\r\n  }\r\n  .inactive:hover {\r\n    background-color: #ffffff;\r\n  }\r\n  .active {\r\n    background-color: rgb(243, 198, 19);\r\n  }\r\n  .active:hover {\r\n    background-color: rgb(243, 198, 19);\r\n  }\r\n\r\n</style>\r\n","<script>\r\n  import { Circle }  from 'leaflet';\r\n  import bindEvents from './util/bind-events';\r\n\r\n  export default {\r\n    props: [\r\n      'latlng',\r\n      'size',\r\n      'color',\r\n      'weight'\r\n    ],\r\n    mounted() {\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map.map;\r\n      if (map) {\r\n        leafletElement.addTo(map);\r\n      }\r\n\r\n      // bind events\r\n\r\n      // const CIRCLE_EVENTS = [\r\n      //   'click',\r\n      //   'dblclick',\r\n      //   'mousedown',\r\n      //   'mouseover',\r\n      //   'mouseout',\r\n      //   'contextmenu'\r\n      // ];\r\n\r\n      // TODO warn if trying to bind an event that doesn't exist\r\n      bindEvents(this, this.$leafletElement, this._events);\r\n    },\r\n    destroyed() {\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    // we don't actually render anything, but need to define either a template\r\n    // or a render function\r\n    render(h) {\r\n      return;\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        return new Circle(this.latlng, this.size, {\r\n          color: this.color,\r\n          weight: this.weight\r\n        });\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n","<script>\r\n  import Circle from '../leaflet/Circle.vue';\r\n\r\n  export default {\r\n    mixins: [Circle],\r\n    props: ['imageId']\r\n  };\r\n</script>\r\n","// Based on:\r\n// https://github.com/iatkin/leaflet-svgicon\r\n// modified to support es6 imports\r\n\r\nimport * as L from 'leaflet';\r\n\r\nconst SvgIcon = L.DivIcon.extend({\r\n    options: {\r\n        \"circleText\": \"\",\r\n        \"className\": \"svg-icon\",\r\n        \"circleAnchor\": null, //defaults to [iconSize.x/2, iconSize.x/2]\r\n        \"circleColor\": null, //defaults to color\r\n        \"circleOpacity\": null, // defaults to opacity\r\n        \"circleFillColor\": \"rgb(255,255,255)\",\r\n        \"circleFillOpacity\": null, //default to opacity\r\n        \"circleRatio\": 0.5,\r\n        \"circleWeight\": null, //defaults to weight\r\n        \"color\": \"rgb(0,102,255)\",\r\n        \"fillColor\": null, // defaults to color\r\n        \"fillOpacity\": 0.4,\r\n        \"fontColor\": \"rgb(0, 0, 0)\",\r\n        \"fontOpacity\": \"1\",\r\n        \"fontSize\": null, // defaults to iconSize.x/4\r\n        \"iconAnchor\": null, //defaults to [iconSize.x/2, iconSize.y] (point tip)\r\n        \"iconSize\": L.point(32,48),\r\n        \"opacity\": 1,\r\n        \"popupAnchor\": null,\r\n        \"weight\": 2\r\n    },\r\n    initialize: function(options) {\r\n        options = L.Util.setOptions(this, options)\r\n\r\n        if (!options.circleAnchor) {\r\n            options.circleAnchor = L.point(Number(options.iconSize.x)/2, Number(options.iconSize.x)/2)\r\n        }\r\n        if (!options.circleColor) {\r\n            options.circleColor = options.color\r\n        }\r\n        if (!options.circleFillOpacity) {\r\n            options.circleFillOpacity = options.opacity\r\n        }\r\n        if (!options.circleOpacity) {\r\n            options.circleOpacity = options.opacity\r\n        }\r\n        if (!options.circleWeight) {\r\n            options.circleWeight = options.weight\r\n        }\r\n        if (!options.fillColor) {\r\n            options.fillColor = options.color\r\n        }\r\n        if (!options.fontSize) {\r\n            options.fontSize = Number(options.iconSize.x/4)\r\n        }\r\n        if (!options.iconAnchor) {\r\n            options.iconAnchor = L.point(Number(options.iconSize.x)/2, Number(options.iconSize.y))\r\n        }\r\n        if (!options.popupAnchor) {\r\n            options.popupAnchor = L.point(0, (-0.75)*(options.iconSize.y))\r\n        }\r\n\r\n        var path = this._createPath()\r\n        var circle = this._createCircle()\r\n\r\n        options.html = this._createSVG()\r\n    },\r\n    _createCircle: function() {\r\n        var cx = Number(this.options.circleAnchor.x)\r\n        var cy = Number(this.options.circleAnchor.y)\r\n        var radius = this.options.iconSize.x/2 * Number(this.options.circleRatio)\r\n        var fill = this.options.circleFillColor.replace(\"rgb(\", \"rgba(\").replace(\")\", \",\" + this.options.circleFillOpacity + \")\")\r\n        var stroke = this.options.circleColor.replace(\"rgb(\", \"rgba(\").replace(\")\", \",\" + this.options.circleOpacity + \")\")\r\n        var strokeWidth = this.options.circleWeight\r\n        var className = this.options.className + \"-circle\"\r\n\r\n        var circle = '<circle class=\"' + className + '\" cx=\"' + cx + '\" cy=\"' + cy + '\" r=\"' + radius + '\" fill=\"' + fill + '\" stroke=\"' + stroke + '\" stroke-width=\"' + strokeWidth + '\"/>'\r\n\r\n        return circle\r\n    },\r\n    _createPathDescription: function() {\r\n        var height = Number(this.options.iconSize.y)\r\n        var width = Number(this.options.iconSize.x)\r\n        var weight = Number(this.options.weight)\r\n        var margin = weight / 2\r\n\r\n        var startPoint = \"M \" + margin + \" \" + (width/2) + \" \"\r\n        var leftLine = \"L \" + (width/2) + \" \" + (height - weight) + \" \"\r\n        var rightLine = \"L \" + (width - margin) + \" \" + (width/2) + \" \"\r\n        var arc = \"A \" + (width/4) + \" \" + (width/4) + \" 0 0 0 \" + margin + \" \" + (width/2) + \" Z\"\r\n\r\n        var d = startPoint + leftLine + rightLine + arc\r\n\r\n        return d\r\n    },\r\n    _createPath: function() {\r\n        var pathDescription = this._createPathDescription()\r\n        var strokeWidth = this.options.weight\r\n        var stroke = this.options.color.replace(\"rgb(\", \"rgba(\").replace(\")\", \",\" + this.options.opacity + \")\")\r\n        var fill = this.options.fillColor.replace(\"rgb(\", \"rgba(\").replace(\")\", \",\" + this.options.fillOpacity + \")\")\r\n        var className = this.options.className + \"-path\"\r\n\r\n        var path = '<path class=\"' + className + '\" d=\"' + pathDescription + '\" stroke-width=\"' + strokeWidth + '\" stroke=\"' + stroke + '\" fill=\"' + fill + '\"/>'\r\n\r\n        return path\r\n    },\r\n    _createSVG: function() {\r\n        var path = this._createPath()\r\n        var circle = this._createCircle()\r\n        var text = this._createText()\r\n        var className = this.options.className + \"-svg\"\r\n\r\n        var style = \"width:\" + this.options.iconSize.x + \"; height:\" + this.options.iconSize.y + \";\"\r\n\r\n        var svg = '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" class=\"' + className + '\" style=\"' + style + '\">' + path + circle + text + '</svg>'\r\n\r\n        return svg\r\n    },\r\n    _createText: function() {\r\n        var fontSize = this.options.fontSize + \"px\"\r\n        var lineHeight = Number(this.options.fontSize)\r\n\r\n        var x = Number(this.options.iconSize.x) / 2\r\n        var y = x + (lineHeight * 0.35) //35% was found experimentally\r\n        var circleText = this.options.circleText\r\n        var textColor = this.options.fontColor.replace(\"rgb(\", \"rgba(\").replace(\")\", \",\" + this.options.fontOpacity + \")\")\r\n\r\n        var text = '<text text-anchor=\"middle\" x=\"' + x + '\" y=\"' + y + '\" style=\"font-size: ' + fontSize + '\" fill=\"' + textColor + '\">' + circleText + '</text>'\r\n\r\n        return text\r\n    }\r\n})\r\n\r\nexport default SvgIcon;\r\n\r\n// L.divIcon.svgIcon = function(options) {\r\n//     return new L.DivIcon.SVGIcon(options)\r\n// }\r\n\r\n// L.Marker.SVGMarker = L.Marker.extend({\r\n//     options: {\r\n//         \"iconFactory\": L.divIcon.svgIcon,\r\n//         \"iconOptions\": {}\r\n//     },\r\n//     initialize: function(latlng, options) {\r\n//         options = L.Util.setOptions(this, options)\r\n//         options.icon = options.iconFactory(options.iconOptions)\r\n//         this._latlng = latlng\r\n//     },\r\n//     onAdd: function(map) {\r\n//         L.Marker.prototype.onAdd.call(this, map)\r\n//     },\r\n//     setStyle: function(style) {\r\n//         if (this._icon) {\r\n//             var svg = this._icon.children[0]\r\n//             var iconBody = this._icon.children[0].children[0]\r\n//             var iconCircle = this._icon.children[0].children[1]\r\n//\r\n//             if (style.color && !style.iconOptions) {\r\n//                 var stroke = style.color.replace(\"rgb\",\"rgba\").replace(\")\", \",\"+this.options.icon.options.opacity+\")\")\r\n//                 var fill = style.color.replace(\"rgb\",\"rgba\").replace(\")\", \",\"+this.options.icon.options.fillOpacity+\")\")\r\n//                 iconBody.setAttribute(\"stroke\", stroke)\r\n//                 iconBody.setAttribute(\"fill\", fill)\r\n//                 iconCircle.setAttribute(\"stroke\", stroke)\r\n//\r\n//                 this.options.icon.fillColor = fill\r\n//                 this.options.icon.color = stroke\r\n//                 this.options.icon.circleColor = stroke\r\n//             }\r\n//             if (style.opacity) {\r\n//                 this.setOpacity(style.opacity)\r\n//             }\r\n//             if (style.iconOptions) {\r\n//                 if (style.color) { style.iconOptions.color = style.color }\r\n//                 iconOptions = L.Util.setOptions(this.options.icon, style.iconOptions)\r\n//                 this.setIcon(L.divIcon.svgIcon(iconOptions))\r\n//             }\r\n//         }\r\n//     }\r\n// })\r\n//\r\n// L.marker.svgMarker = function(latlng, options) {\r\n//     return new L.Marker.SVGMarker(latlng, options)\r\n// }\r\n","// L.DivIcon.SVGIcon.noCircleIcon = L.DivIcon.SVGIcon.extend({\r\n//     initialize: function(options) {\r\n//         options = L.Util.setOptions(this, options)\r\n//         options.circleAnchor = L.point(Number(options.iconSize.x)/2, Number(options.iconSize.y)/2)\r\n//         options.circleRatio = 0;\r\n//         L.DivIcon.SVGIcon.prototype.initialize.call(this, options)\r\n//\r\n//         return options\r\n//     },\r\n// })\r\n\r\n// L.divIcon.svgIcon.noCircleIcon = function(options) {\r\n//     return new L.DivIcon.SVGIcon.NoCircleIcon(options)\r\n// }\r\n\r\n// L.Marker.SVGMarker.NoCircleMarker = L.Marker.SVGMarker.extend({\r\n//     options: {\r\n//         \"iconFactory\": L.divIcon.svgIcon.NoCircleIcon\r\n//     }\r\n// })\r\n//\r\n// L.marker.svgMarker.noCircleMarker = function(latlng, options) {\r\n//     return new L.Marker.SVGMarker.noCircleMarker(latlng, options)\r\n// }\r\n\r\nimport * as L from 'leaflet';\r\nimport SvgIcon from './svg-icon';\r\n\r\nconst TriangleIcon = SvgIcon.extend({\r\n  initialize: function(options) {\r\n    options = L.Util.setOptions(this, options);\r\n    const circleAnchor = L.point(Number(options.iconSize.x) / 2,\r\n                                 Number(options.iconSize.y) / 2);\r\n    options.circleAnchor = circleAnchor;\r\n    options.circleRatio = 0;\r\n    options.className = options.className + \"-noClick\";\r\n    SvgIcon.prototype.initialize.call(this, options);\r\n\r\n    return options;\r\n  },\r\n\r\n  _createPathDescription: function () {\r\n    const height = Number(this.options.iconSize.y);\r\n    const width = Number(this.options.iconSize.x);\r\n    const weight = Number(this.options.weight);\r\n    const margin = weight;\r\n\r\n    const startPoint = \"M \" + margin + \" \" + (0) + \" \";\r\n    const leftLine = \"L \" + (width / 2) + \" \" + (height - margin) + \" \";\r\n    const rightLine = \"L \" + (width - margin) + \" \" + (0) + \" Z\";\r\n    const d = startPoint + leftLine + rightLine;\r\n\r\n    return d;\r\n  }\r\n})\r\n\r\nexport default TriangleIcon;\r\n\r\n// L.divIcon.svgIcon.triangleIcon = function(options) {\r\n//     return new L.DivIcon.SVGIcon.TriangleIcon(options)\r\n// }\r\n\r\n// L.Marker.SVGMarker.TriangleMarker = L.Marker.SVGMarker.extend({\r\n//     options: {\r\n//         \"iconFactory\": L.divIcon.svgIcon.triangleIcon\r\n//     }\r\n// })\r\n//\r\n// L.marker.svgMarker.triangleMarker = function(latlng, options) {\r\n//     return new L.Marker.SVGMarker.TriangleMarker(latlng, options)\r\n// }\r\n","<!--\r\n  wraps leaflet svg-icons as a vue component\r\n  https://github.com/iatkin/leaflet-svgicon\r\n-->\r\n\r\n<script>\r\n  import * as L from 'leaflet';\r\n  // import DivIcon from 'leaflet';\r\n  import TriangleIcon from '../util/triangle-icon';\r\n\r\n  export default {\r\n    props: [\r\n      'latlng',\r\n      'rotationAngle',\r\n      'hFov'\r\n    ],\r\n    render(h) {\r\n      // this.orientation;\r\n      return;\r\n    },\r\n    mounted() {\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      // console.log('WHO IT IS', leafletElement);\r\n      const map = this.$store.state.map.map;\r\n\r\n      // REVIEW kind of hacky/not reactive?\r\n      if (map) {\r\n        leafletElement.addTo(map);\r\n      }\r\n    },\r\n    destroyed() {\r\n      // console.log('svgMarker destroyed fired, latlng is', this.latlng);\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    watch: {\r\n      rotationAngle(nextRotationAngle) {\r\n        // console.log('pngMarker orientation changed', nextRotationAngle);\r\n        this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n        const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n        const map = this.$store.state.map.map;\r\n\r\n        // REVIEW kind of hacky/not reactive?\r\n        if (map) {\r\n          leafletElement.addTo(map);\r\n        }\r\n      },\r\n      latlng(nextLatLng) {\r\n        // console.log('pngMarker orientation changed', nextRotationAngle);\r\n        this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n        const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n        const map = this.$store.state.map.map;\r\n\r\n        // REVIEW kind of hacky/not reactive?\r\n        if (map) {\r\n          leafletElement.addTo(map);\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      coneCoords() {\r\n        const hFovDegrees = this.hFov * (180/3.14159265359);\r\n        const scale = 50//options.scale;\r\n        const angle = hFovDegrees / 2.0;\r\n        const width = Math.sin(angle * Math.PI / 180);\r\n        const length = Math.sqrt(1.0 - width * width);\r\n        const coneCoords = [width * scale, length * scale];\r\n\r\n        return coneCoords;\r\n      },\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        const coneCoords = this.coneCoords;\r\n        const icon = new TriangleIcon({\r\n          iconSize: L.point(this.coneCoords[0], this.coneCoords[1]),\r\n          iconAnchor: [this.coneCoords[0] / 2, this.coneCoords[1]],\r\n        });\r\n        return L.marker(this.latlng, {\r\n          icon: icon,\r\n          rotationAngle: this.rotationAngle,\r\n        });\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n  .svg-icon-noClick-svg {\r\n    pointer-events: none;\r\n  }\r\n\r\n  .svg-icon-noClick {\r\n    pointer-events: none;\r\n  }\r\n</style>\r\n","export default {\r\n  computed: {\r\n    cyclomediaActive() {\r\n      return this.$store.state.cyclomedia.active;\r\n    },\r\n    cyclomediaRecordings() {\r\n      return this.$store.state.cyclomedia.recordings;\r\n    },\r\n  },\r\n  methods: {\r\n    handleCyclomediaButtonClick() {\r\n      this.updateCyclomediaRecordings();\r\n\r\n    },\r\n    handleCyclomediaRecordingClick(e) {\r\n      const latlng = e.latlng;\r\n      console.log('handleCyclomediaRecordingClick is running, latlng:', latlng);\r\n      this.$store.commit('setCyclomediaLatLngFromMap', latlng);\r\n      // const viewer = this.$store.state.cyclomedia.viewer;\r\n      // viewer.openByCoordinate([latlng.lng, latlng.lat]);\r\n    },\r\n    updateCyclomediaRecordings() {\r\n      const map = this.$store.state.map.map;\r\n      const zoom = map.getZoom();\r\n      if (!this.$store.state.cyclomedia.active || zoom <= 18) {\r\n        this.$store.commit('setCyclomediaRecordings', [])\r\n        return;\r\n      }\r\n      const bounds = map.getBounds();\r\n      this.$cyclomediaRecordingsClient.getRecordings(\r\n        bounds,\r\n        recordings => {\r\n          this.$store.commit('setCyclomediaRecordings', recordings);\r\n        }\r\n      );\r\n    },\r\n  }\r\n};\r\n","<template>\r\n  <div id=\"cyclo-container\"\r\n       :class=\"this.cycloContainerClass\"\r\n  >\r\n  <!-- v-once -->\r\n    <div id=\"inCycloDiv\"\r\n         @click=\"this.popoutClicked\"\r\n         :style=\"{ right: popoutPosition }\"\r\n         v-if=\"this.isMobileOrTablet === false && this.popoutAble === true\"\r\n    >\r\n      <i class=\"fa fa-external-link fa popout-icon\"></i>\r\n    </div>\r\n    <div id=\"cycloviewer\"\r\n         ref=\"cycloviewer\"\r\n         class=\"panoramaViewerWindow\"\r\n    >\r\n    <!-- @mousedown=\"console.log('mouseup')\" -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import proj4 from 'proj4';\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        'docWidth': 0,\r\n        'divWidth': 0,\r\n        'popoutPosition': 0,\r\n      }\r\n    },\r\n    props: ['screenPercent'],\r\n    computed: {\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n      fullScreenMapEnabled() {\r\n        return this.$store.state.fullScreenMapEnabled;\r\n      },\r\n      popoutAble() {\r\n        let answer;\r\n        if (this.$config.cyclomedia.popoutAble === false) {\r\n          answer = false\r\n        } else {\r\n          answer = true\r\n        }\r\n        return answer\r\n      },\r\n      cyclomediaInitialized() {\r\n        return this.$store.state.cyclomedia.initialized;\r\n      },\r\n      cyclomediaActive() {\r\n        return this.$store.state.cyclomedia.active;\r\n      },\r\n      pictometryActive() {\r\n        return this.$store.state.pictometry.active;\r\n      },\r\n      cycloContainerClass() {\r\n        if (this.pictometryActive) {\r\n          return 'medium-16 large-16 columns mb-panel'\r\n        } else {\r\n          return 'medium-24 large-24 columns mb-panel'\r\n        }\r\n      },\r\n      locForCyclo() {\r\n        // console.log('computing locForCyclo');\r\n        const geocodeData = this.$store.state.geocode.data;\r\n        const map = this.$store.state.map.map;\r\n        if (geocodeData) {\r\n          return [geocodeData.geometry.coordinates[1], geocodeData.geometry.coordinates[0]];\r\n        }\r\n      },\r\n      latLngFromMap() {\r\n        return this.$store.state.cyclomedia.latLngFromMap;\r\n      },\r\n      mapCenter() {\r\n        return this.$store.state.map.center;\r\n      },\r\n      navBarOpen() {\r\n        return this.$store.state.cyclomedia.navBarOpen;\r\n      },\r\n      projection4326() {\r\n        return \"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs\";\r\n      },\r\n      projection2272() {\r\n        return \"+proj=lcc +lat_1=40.96666666666667 +lat_2=39.93333333333333 +lat_0=39.33333333333334 +lon_0=-77.75 +x_0=600000 +y_0=0 +ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs\";\r\n      },\r\n      // surfaceCursorOn() {\r\n      //   return this.$store.state.cyclomedia.surfaceCursorOn;\r\n      // }\r\n      // docWidthComp() {\r\n      //   return $(document).width();\r\n      // }\r\n    },\r\n    watch: {\r\n      fullScreenMapEnabled() {\r\n        this.setDivWidth();\r\n      },\r\n      locForCyclo(newCoords) {\r\n        // console.log('watch locForCyclo is firing, setNewLocation running with newCoords:', newCoords);\r\n        if (newCoords) {\r\n          this.setNewLocation(newCoords);\r\n        }\r\n      },\r\n      latLngFromMap(newCoords) {\r\n        // console.log('watch latLngFromMap is firing, setNewLocation running with newCoords:', newCoords);\r\n        if (this.cyclomediaInitialized) {\r\n\r\n          if (Array.isArray(newCoords)) {\r\n            // console.log('it is an array');\r\n            this.setNewLocation([newCoords[1], newCoords[0]]);\r\n          } else {\r\n            // console.log('it is not an array');\r\n            this.setNewLocation([newCoords.lat, newCoords.lng]);\r\n          }\r\n        }\r\n      },\r\n      // docWidthComp() {\r\n      //   console.log('docWidth changed');\r\n      // }\r\n      cyclomediaInitialized() {\r\n        StreetSmartApi.init({\r\n          targetElement: this.$refs.cycloviewer,\r\n          username: this.$config.cyclomedia.username,\r\n          password: this.$config.cyclomedia.password,\r\n          apiKey: this.$config.cyclomedia.apiKey,\r\n          // srs: 'EPSG:4326',\r\n          srs: 'EPSG:2272',\r\n          locale: 'en-us',\r\n          addressSettings: {\r\n            locale: 'en-us',\r\n            database: 'CMDatabase'\r\n          }\r\n        }).then (\r\n          () => {\r\n            // get map center and set location\r\n            const latLngFromMap = this.$store.state.cyclomedia.latLngFromMap;\r\n            this.setNewLocation([latLngFromMap[0], latLngFromMap[1]]);\r\n          },\r\n          err => {\r\n            // console.log('Api: init: failed. Error: ', err);\r\n          }\r\n        );\r\n        window.addEventListener('resize', this.setDivWidth);\r\n      },\r\n      cyclomediaActive(newActiveStatus) {\r\n        this.setDivWidth();\r\n        if (newActiveStatus === true) {\r\n          this.setNewLocation(this.latLngFromMap);\r\n        }\r\n      },\r\n      // pictometryActive() {\r\n      //   this.setDivWidth();\r\n      // }\r\n    },\r\n    updated() {\r\n      // console.log('cyclomedia updated running');\r\n      // TODO find a better way to get the image to update and not be stretched\r\n      // const viewer = this.$store.state.cyclomedia.viewer;\r\n      if (this.cyclomediaActive) {\r\n        if (window.panoramaViewer) {\r\n          window.panoramaViewer.rotateRight(0.0000001);\r\n        }\r\n      }\r\n      this.setDivWidth();\r\n    },\r\n    methods: {\r\n      setDivWidth() {\r\n        const docWidth = $(document).width();\r\n        this.docWidth = docWidth;\r\n        const el = document.getElementById('cyclo-container');\r\n        const divStyle = window.getComputedStyle(el);\r\n        const divWidth = parseFloat(divStyle.getPropertyValue('width').replace('px', ''));\r\n        this.divWidth = divWidth;\r\n        // console.log('setDivWidth is running, docWidth:', docWidth, 'divWidth', divWidth);\r\n        let answer;\r\n        if (this.fullScreenMapEnabled) {\r\n          answer = docWidth - divWidth + 'px';\r\n        } else {\r\n          answer = docWidth - (docWidth/this.$props.screenPercent + divWidth) + 'px';\r\n        }\r\n        // console.log('setDivWidth, answer:', answer);\r\n        this.popoutPosition = answer;\r\n        // return width;\r\n      },\r\n      setNewLocation(coords) {\r\n        // console.log('cyclomedia setNewLocation is running using', coords);\r\n        const viewerType = StreetSmartApi.ViewerType.PANORAMA;\r\n        const coords2272 = proj4(this.projection4326, this.projection2272, [coords[1], coords[0]]);\r\n        // StreetSmartApi.open(center.lng + ',' + center.lat, {\r\n        // StreetSmartApi.open(coords[1] + ',' + coords[0], {\r\n        StreetSmartApi.open(coords2272[0] + ',' + coords2272[1], {\r\n          viewerType: viewerType,\r\n          srs: 'EPSG:2272',\r\n          // srs: 'EPSG:4326',\r\n          panoramaViewer: {\r\n            closable: false,\r\n            maximizable: false,\r\n          }\r\n        }).then (\r\n          function(result) {\r\n            // console.log('StreetSmartApi2, result:', result);\r\n            const widget = this;\r\n            // console.log('Created component through API:', result);\r\n            if (result) {\r\n              for (let i =0; i < result.length; i++) {\r\n                if(result[i].getType() === StreetSmartApi.ViewerType.PANORAMA) window.panoramaViewer = result[i];\r\n              }\r\n              widget.sendOrientationToStore();\r\n\r\n              // StreetSmartApi.removeOverlay()\r\n              window.panoramaViewer.toggleNavbarExpanded(widget.navBarOpen);\r\n              // if (widget.isMobileOrTablet) {\r\n              // console.log('about to remove surfaceCursorLayer');\r\n              // StreetSmartApi.removeOverlay('surfaceCursorLayer');\r\n              // console.log('removed surfaceCursorLayer');\r\n              // }\r\n\r\n              // StreetSmartApi.removeOverlay('measurementLayer');\r\n              // window.panoramaViewer.toggleButtonEnabled('panorama.measure', false);\r\n              window.panoramaViewer.toggleButtonEnabled('panorama.elevation', false);\r\n              window.panoramaViewer.toggleButtonEnabled('panorama.reportBlurring', false);\r\n\r\n              for (let overlay of window.panoramaViewer.props.overlays) {\r\n                // console.log('overlay:', overlay);\r\n                if (overlay.id === 'surfaceCursorLayer') {\r\n                  if (overlay.visible === true) {\r\n                    window.panoramaViewer.toggleOverlay(overlay);\r\n                    // overlay.visible = false;\r\n                  }\r\n                }\r\n              }\r\n\r\n              if (!this.$config.cyclomedia.measurementAllowed || this.$config.cyclomedia.measurementAllowed === 'false') {\r\n                StreetSmartApi.removeOverlay('measurementLayer');\r\n                window.panoramaViewer.toggleButtonEnabled('panorama.measure', false);\r\n              }\r\n\r\n              window.panoramaViewer.on('VIEW_CHANGE', function() {\r\n                if (window.panoramaViewer.props.orientation.yaw !== widget.$store.state.cyclomedia.orientation.yaw ||\r\n                    window.panoramaViewer.props.orientation.xyz !== widget.$store.state.cyclomedia.orientation.xyz\r\n                ) {\r\n                  // console.log('on VIEW_CHANGE fired with yaw change', window.panoramaViewer.props.orientation);\r\n                  widget.sendOrientationToStore();\r\n                } else if (window.panoramaViewer.getNavbarExpanded() !== this.navBarOpen) {\r\n                  widget.$store.commit('setCyclomediaNavBarOpen', window.panoramaViewer.getNavbarExpanded());\r\n                }\r\n              })\r\n\r\n              window.panoramaViewer.on('VIEW_LOAD_END', function() {\r\n                if (window.panoramaViewer.props.orientation.yaw !== widget.$store.state.cyclomedia.orientation.yaw ||\r\n                    window.panoramaViewer.props.orientation.xyz !== widget.$store.state.cyclomedia.orientation.xyz\r\n                ) {\r\n                  // console.log('on VIEW_CHANGE fired with yaw change', window.panoramaViewer.props.orientation);\r\n                  widget.sendOrientationToStore();\r\n                } else if (window.panoramaViewer.getNavbarExpanded() !== this.navBarOpen) {\r\n                  widget.$store.commit('setCyclomediaNavBarOpen', window.panoramaViewer.getNavbarExpanded());\r\n                }\r\n              })\r\n            }\r\n          }.bind(this)\r\n        ).catch(\r\n          function(reason) {\r\n            // console.log('Failed to create component(s) through API: ' + reason);\r\n          }\r\n        );\r\n\r\n        // const viewer = this.$store.state.cyclomedia.viewer;\r\n        // viewer.openByCoordinate(coords);\r\n      },\r\n      sendOrientationToStore() {\r\n        // console.log('sendOrientationToStore, yaw:', window.panoramaViewer.props.orientation.yaw);\r\n        this.$store.commit('setCyclomediaYaw', window.panoramaViewer.props.orientation.yaw)\r\n        this.$store.commit('setCyclomediaHFov', window.panoramaViewer.props.orientation.hFov)\r\n        const xy = [window.panoramaViewer.props.orientation.xyz[0], window.panoramaViewer.props.orientation.xyz[1]];\r\n        const lnglat = proj4(this.projection2272, this.projection4326, xy);\r\n        // console.log('xy:', xy, 'lnglat', lnglat);\r\n        this.$store.commit('setCyclomediaXyz', lnglat);\r\n      },\r\n      popoutClicked() {\r\n        const map = this.$store.state.map.map;\r\n        const center = map.getCenter();\r\n        window.open('//cyclomedia.phila.gov/?' + center.lat + '&' + center.lng, '_blank');\r\n        this.$store.commit('setCyclomediaActive', false);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n\r\n#cyclo-container {\r\n  padding: 0px;\r\n  height: 50%;\r\n  display: none;\r\n}\r\n\r\n@media screen and (min-width: 46.875em) {\r\n  #cyclo-container {\r\n    display: block;\r\n  }\r\n}\r\n\r\n#inCycloDiv {\r\n  /* position: absolute; */\r\n  position: absolute;\r\n  /* top: 0px; */\r\n  right: 0px;\r\n  /* float: right; */\r\n  background-color: white;\r\n  border: 0px solid;\r\n  width: 30px;\r\n  height: 30px;\r\n  cursor:pointer;\r\n  z-index: 10;\r\n}\r\n\r\n.popout-icon {\r\n  margin-top: 8.5px;\r\n  font-size: 15px;\r\n  margin-left: 8.5px;\r\n}\r\n\r\n.panoramaViewerWindow {\r\n  display: block;\r\n  width: 100%;\r\n  height:100%;\r\n}\r\n\r\n@media screen and (max-width: 46.875em) {\r\n  .cyclo-container {\r\n    display: none;\r\n  }\r\n}\r\n\r\n</style>\r\n","<template>\r\n  <!-- <div class=\"leaflet-bar easy-button-container leaflet-control\"> -->\r\n  <div class=\"leaflet-bar easy-button-container leaflet-control\">\r\n    <button :class=\"this.pictometryActive\"\r\n            @click.prevent=\"handleButtonClick\"\r\n    >\r\n      <span class=\"button-state\">\r\n        <img class=\"button-image\" :src=\"imgSrc\">\r\n      </span>\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Control from '../leaflet/Control.vue';\r\n\r\n  export default {\r\n    extends: Control,\r\n    // TODO figure how to extend props. sometimes it's an obj, sometimes an array.\r\n    // props: Object.assign(props, {\r\n    // }),\r\n    props: [\r\n      'link',\r\n      'imgSrc'\r\n    ],\r\n    computed: {\r\n      pictometryActive() {\r\n        return this.$store.state.pictometry.active ? 'active' : 'inactive'\r\n      }\r\n    },\r\n    methods: {\r\n      handleButtonClick(e) {\r\n        this.$store.commit('setPictometryActive', !this.$store.state.pictometry.active);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  .inactive {\r\n    background-color: #ffffff;\r\n  }\r\n  .inactive:hover {\r\n    background-color: #ffffff;\r\n  }\r\n  .active {\r\n    background-color: rgb(243, 198, 19);\r\n  }\r\n  .active:hover {\r\n    background-color: rgb(243, 198, 19);\r\n  }\r\n\r\n</style>\r\n","export default {\r\n  computed: {\r\n    pictometryActive() {\r\n      return this.$store.state.pictometry.active;\r\n    }\r\n  }\r\n};\r\n","<script>\r\n  export default {\r\n    props: [\r\n      'icon',\r\n      'latlng',\r\n      'height',\r\n      'width'\r\n    ],\r\n    render(h) {\r\n      return;\r\n    },\r\n    computed: {\r\n      ipa() {\r\n        return this.$store.state.pictometry.ipa;\r\n      },\r\n    },\r\n    mounted() {\r\n      // console.log('mounting PngMarker', this.icon);\r\n      this.placeMarker(this.$props.latlng);\r\n    },\r\n    beforeDestroy() {\r\n      // console.log('before destroying PngMarker', this.icon);\r\n      this.ipa.removeShapes(this.$store.state.pictometry.pngMarkerIds);\r\n      // console.log('before destroyed PngMarker', this.icon);\r\n    },\r\n    // destroyed() {\r\n    //   console.log('destroying PngMarker', this.icon);\r\n    //   this.ipa.removeShapes(this.$store.state.pictometry.pngMarkerIds);\r\n    //   console.log('destroyed PngMarker', this.icon);\r\n    // },\r\n    watch: {\r\n      latlng(nextLatlng) {\r\n        // console.log('PngMarker: latlng changed');\r\n        this.ipa.removeShapes(this.$store.state.pictometry.pngMarkerIds);\r\n        this.placeMarker(nextLatlng);\r\n      }\r\n    },\r\n    methods: {\r\n      constructLocalUrl(host, path1, path2) {\r\n        let url;\r\n        if (window.location.protocol === 'https:') {\r\n          // console.log('using https', window.location.protocol);\r\n          url = 'https://' + host + path1 + path2;\r\n        } else {\r\n          // console.log('using http', window.location.protocol);\r\n          url = 'http://' + host + path1 + path2;\r\n        }\r\n        // console.log('constructing url:', url);\r\n        return url\r\n      },\r\n      placeMarker(nextLatlng) {\r\n        // console.log('starting placeMarker', nextLatlng, this.$props.icon);\r\n        const port = window.location.port;\r\n        let host;\r\n        if (port != '') {\r\n          host = window.location.hostname + ':' + port;\r\n        } else {\r\n          host = window.location.hostname;\r\n        }\r\n        const pngMarker = {\r\n          type : this.ipa.SHAPE_TYPE.MARKER,\r\n          center: { y: nextLatlng[0], x: nextLatlng[1]},\r\n          markerImageHeight: this.$props.height,\r\n          markerImageWidth: this.$props.width,\r\n          markerOffsetX: this.$props.offsetX,\r\n          markerOffsetY: this.$props.offsetY,\r\n          markerImage: this.constructLocalUrl(host, '/src/assets/', this.$props.icon),\r\n          onShapeClick: 'true'\r\n        };\r\n        this.ipa.addShapes([pngMarker], this.didAddShapes)\r\n      },\r\n      didAddShapes(result) {\r\n        // const pngMarkerIds = shapes.filter(shape => {\r\n        //                         return shape.success === 'true';\r\n        //                       }).map(shape => shape.shapeId);\r\n        // this.$store.commit('setPictometryPngMarkerIds', pngMarkerIds);\r\n        for ( var i = 0; i < result.length; i++) {\r\n          if ( result[i].success === 'false' ) {\r\n            console.log(result[i].error);\r\n          } else {\r\n            const pngMarkerIds = this.$store.state.pictometry.pngMarkerIds;\r\n            // console.log('pngMarkerIds', pngMarkerIds);\r\n            pngMarkerIds.push(result[i].shapeId);\r\n\r\n          }\r\n        }\r\n      },\r\n    }\r\n  };\r\n</script>\r\n","<script>\r\n  export default {\r\n    props: [\r\n      'latlng',\r\n      'rotationAngle',\r\n      'hFov'\r\n    ],\r\n    render(h) {\r\n      return;\r\n    },\r\n    computed: {\r\n      ipa() {\r\n        return this.$store.state.pictometry.ipa;\r\n      },\r\n      zoom() {\r\n        return this.$store.state.pictometry.zoom;\r\n      },\r\n      radius() {\r\n        const zoomMap = {\r\n          '17': 75,\r\n          '18': 50,\r\n          '19': 25,\r\n          '20': 15,\r\n          '21': 10,\r\n          '22': 10,\r\n          '23': 10,\r\n          '24': 10\r\n        }\r\n        return zoomMap[this.zoom]\r\n        // return zoomMap[this.$store.state.map.zoom]\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getViewConeLatLon();\r\n    },\r\n    beforeDestroy() {\r\n      this.ipa.removeShapes(this.$store.state.pictometry.shapeIds);\r\n    },\r\n    watch: {\r\n      radius(nextRadius) {\r\n        // this.ipa.getMetaData(function(e) {\r\n        //   console.log(e);\r\n        // });\r\n        // this.ipa.getZoomRange(function(e) {\r\n        //   console.log(e);\r\n        // })\r\n        // console.log('radius:', nextRadius);\r\n        this.getViewConeLatLon();\r\n      },\r\n      rotationAngle() {\r\n        this.ipa.removeShapes(this.$store.state.pictometry.shapeIds);\r\n        this.getViewConeLatLon();\r\n      },\r\n      latlng() {\r\n        this.ipa.removeShapes(this.$store.state.pictometry.shapeIds);\r\n        this.getViewConeLatLon();\r\n      },\r\n    },\r\n    methods: {\r\n      getViewConeLatLon() {\r\n        // console.log('getViewConeLatLon is running');\r\n        const camLat = this.latlng[0];\r\n        const camLon = this.latlng[1];\r\n        // Earth's radius\r\n        const ER=6378137;\r\n        // viewcone radius, for scaling its size\r\n        // const camR = 10;\r\n        const camR = this.radius;\r\n        // Angle1 - camera angle off of N, Angle2 - fov angle\r\n        const Angle1 = this.rotationAngle;\r\n        const Angle2 = parseFloat(this.hFov) * 180/Math.PI;\r\n\r\n        const dnLP = Math.cos((Angle1+Angle2/2) * Math.PI/180)*camR;\r\n        const deLP = Math.sin((Angle1+Angle2/2) * Math.PI/180)*camR;\r\n        const dnRP = Math.cos((Angle1-Angle2/2) * Math.PI/180)*camR;\r\n        const deRP = Math.sin((Angle1-Angle2/2) * Math.PI/180)*camR;\r\n        //Coordinate offsets in radians\r\n        const dLatLP = dnLP/ER;\r\n        const dLonLP = deLP/(ER*Math.cos(Math.PI*camLat/180));\r\n        const dLatRP = dnRP/ER;\r\n        const dLonRP = deRP/(ER*Math.cos(Math.PI*camLat/180));\r\n        //OffsetPosition\r\n        const camRightLat = camLat + dLatLP * 180/Math.PI;\r\n        const camRightLon = camLon + dLonLP * 180/Math.PI;\r\n        const camLeftLat = camLat + dLatRP * 180/Math.PI;\r\n        const camLeftLon = camLon + dLonRP * 180/Math.PI;\r\n\r\n        const coordinates = [ {y : camLat, x : camLon, z: 0.0}, {y : camRightLat, x : camRightLon, z: 0.0}, {y : camLeftLat, x : camLeftLon, z: 0.0} ]\r\n        this.placeViewCone(coordinates)\r\n      },\r\n\r\n      placeViewCone: function(coords){\r\n        // console.log('placeViewCone is running');\r\n        const self = this;\r\n        const viewTriangle = {\r\n          type: this.ipa.SHAPE_TYPE.POLYGON,\r\n          coordinates: coords,\r\n          // coordinates : [ {y : app.state.stViewY, x : app.state.stViewX, z: 0.0}, {y : app.state.viewCone.camRightLat, x : app.state.viewCone.camRightLon, z: 0.0}, {y : app.state.viewCone.camLeftLat, x : app.state.viewCone.camLeftLon, z: 0.0} ],\r\n          strokeColor: \"#00a0ee\",\r\n          strokeOpacity: 0.75,\r\n          strokeWeight: 2,\r\n          fillColor: \"#00a0ee\",\r\n          fillOpacity: 0.25,\r\n          altitudeMode: this.ipa.ALTITUDE_MODE.RELATIVE_TO_GROUND\r\n        };\r\n        this.ipa.addShapes([viewTriangle], function(result) {\r\n          for ( var i = 0; i < result.length; i++) {\r\n            if ( result[i].success === 'false' ) {\r\n              alert(result[i].error);\r\n            } else {\r\n              const shapeIds = self.$store.state.pictometry.shapeIds;\r\n              // console.log('shapeIds:', shapeIds);\r\n              // console.log('current shapeId:', result[i].shapeId);\r\n              shapeIds.push(result[i].shapeId);\r\n              const test = shapeIds.slice(0, -1)\r\n              // console.log('slice', test);\r\n              self.ipa.removeShapes(shapeIds.slice(0, -1));\r\n            }\r\n          }\r\n        });\r\n      },\r\n    }\r\n  };\r\n</script>\r\n","<template>\r\n  <div id=\"pict-container\"\r\n       :class=\"this.pictContainerClass\"\r\n  >\r\n    <div id=\"in-pict-div\"\r\n         @click=\"this.popoutClicked\"\r\n         v-if=\"this.isMobileOrTablet === false\"\r\n    >\r\n      <i class=\"fa fa-external-link fa popout-icon\"></i>\r\n    </div>\r\n    <iframe id=\"pictometry-ipa\"\r\n            src=\"#\"\r\n            ref=\"pictometryIpa\"\r\n    >\r\n    </iframe>\r\n    <!-- </div> -->\r\n    <div>\r\n      <slot />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import $ from 'jquery';\r\n  import md5 from 'blueimp-md5';\r\n\r\n  export default {\r\n    props: [\r\n      'apiKey',\r\n      'secretKey',\r\n    ],\r\n    created() {\r\n      this.$IFRAME_ID = 'pictometry-ipa';\r\n    },\r\n    mounted() {\r\n      // fetch pictometry ipa script\r\n      const scriptUrl = 'https://pol.pictometry.com/ipa/v1/embed/host.php' + '?apikey=' + this.apiKey;\r\n      const self = this;\r\n      $.getScript(scriptUrl, self.init);\r\n    },\r\n    computed: {\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n      cyclomediaActive() {\r\n        return this.$store.state.cyclomedia.active;\r\n      },\r\n      pictContainerClass() {\r\n        if (this.cyclomediaActive) {\r\n          return 'medium-8 large-8 columns mb-panel';\r\n        } else {\r\n          return 'medium-24 large-24 columns mb-panel';\r\n        }\r\n      },\r\n      mapCenter() {\r\n        // return this.$store.state.geocode.data.geometry.coordinates;\r\n        return this.$store.state.pictometry.map.center;\r\n      },\r\n      mapZoom() {\r\n        // const mapZoom = this.$store.state.map.zoom;\r\n        // let zoom;\r\n        // if (this.cyclomediaActive) {\r\n        //   zoom = mapZoom\r\n        // } else {\r\n        //   zoom = mapZoom + 1;\r\n        // }\r\n        // return zoom;\r\n        return this.$store.state.pictometry.map.zoom;\r\n      },\r\n    },\r\n    watch: {\r\n      mapCenter(nextCenter) {\r\n        const [x, y] = nextCenter;\r\n        const zoom = this.mapZoom;\r\n        if (this.$ipa) {\r\n          this.$ipa.setLocation({ x, y, zoom });\r\n        }\r\n      },\r\n      mapZoom(nextZoom) {\r\n        // console.log('watch zoomSentToPict', nextZoom);\r\n        if (this.$ipa) {\r\n          this.$ipa.setLocation({\r\n            y: this.mapCenter.lat,\r\n            x: this.mapCenter.lng,\r\n            zoom: nextZoom\r\n          });\r\n        }\r\n      },\r\n      cyclomediaActive(nextStatus) {\r\n        if (nextStatus) {\r\n          // console.log('pict: cyclo on');\r\n          this.$ipa.showDashboard({\r\n            zoom: false,\r\n            imageFilter: false,\r\n            layers: false,\r\n            nextPrevious: false,\r\n            tools: false,\r\n            annotations: false,\r\n            rotation: false,\r\n            clearMeasurements: false,\r\n            exportPdf: false,\r\n            dualPane: false,\r\n            imageDate: false,\r\n            panTool: false,\r\n            exportImage: false,\r\n            areaTool: false,\r\n            distanceTool: false,\r\n            heightTool: false,\r\n            locationTool: false,\r\n            elevationTool: false,\r\n            bearingTool: false,\r\n            slopeTool: false,\r\n            xyzTool: false,\r\n            identifyPoint: false,\r\n            identifyBox: false\r\n          });\r\n        } else {\r\n          // console.log('pict: cyclo off');\r\n          this.$ipa.showDashboard({\r\n            zoom: true,\r\n            imageFilter: true,\r\n            layers: true,\r\n            nextPrevious: true,\r\n            tools: true,\r\n            annotations: true,\r\n            rotation: true,\r\n            clearMeasurements: true,\r\n            exportPdf: true,\r\n            dualPane: true,\r\n            imageDate: true,\r\n            panTool: true,\r\n            exportImage: true,\r\n            areaTool: true,\r\n            distanceTool: true,\r\n            heightTool: true,\r\n            locationTool: true,\r\n            elevationTool: true,\r\n            bearingTool: true,\r\n            slopeTool: true,\r\n            xyzTool: true,\r\n            identifyPoint: true,\r\n            identifyBox: true\r\n          });\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      popoutClicked() {\r\n        const map = this.$store.state.map.map;\r\n        const center = map.getCenter();\r\n        window.open('//pictometry.phila.gov/?' + center.lat + '&' + center.lng, '_blank');\r\n        this.$store.commit('setPictometryActive', false);\r\n      },\r\n      init() {\r\n        // construct signed url\r\n        const d = new Date();\r\n        const t = Math.floor(d.getTime() / 1000);\r\n        const unsignedUrl = 'https://pol.pictometry.com/ipa/v1/load.php' + \"?apikey=\" + this.apiKey + \"&ts=\" + t;\r\n        const hash = md5(unsignedUrl, this.secretKey);\r\n        const iframeId = this.$IFRAME_ID;\r\n        const signedUrl = unsignedUrl + \"&ds=\" + hash + \"&app_id=\" + iframeId;\r\n\r\n        // set the iframe src to load the IPA\r\n        const iframe = this.$refs.pictometryIpa;\r\n        // REVIEW can we bind this to a computed instead?\r\n        iframe.setAttribute('src', signedUrl);\r\n\r\n        // create pictometry host\r\n        const ipa = this.$ipa = new PictometryHost(iframeId, 'https://pol.pictometry.com/ipa/v1/load.php');\r\n        this.$store.commit('setPictometryIpa', ipa);\r\n        ipa.ready = this.ipaReady;\r\n      },\r\n      ipaReady() {\r\n        this.$ipa.setLocation({\r\n          y: this.mapCenter.lat,\r\n          x: this.mapCenter.lng,\r\n          zoom: this.mapZoom\r\n        });\r\n\r\n        const self = this;\r\n\r\n        this.$ipa.addListener('onendzoom', function(zoom) {\r\n          // console.log('widget: ipa detected zoom change to', zoom);\r\n          self.$store.commit('setPictometryZoom', zoom.level);\r\n        })\r\n      },\r\n    }, // end of methods\r\n  }; // end of export\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\r\nheader.site-header > .row:last-of-type {\r\n  background: #2176d2;\r\n}\r\n\r\n#in-pict-div {\r\n  position: absolute;\r\n  top: 0px;\r\n  right: 0px;\r\n  background-color: white;\r\n  border: 0px solid;\r\n  width: 30px;\r\n  height: 30px;\r\n  cursor:pointer;\r\n  /* float: right; */\r\n  /*display:none;*/\r\n  /*z-index: 2000000;*/\r\n  /*position: relative;\r\n  top: 0px;\r\n  right: 0px;*/\r\n}\r\n\r\n.popout-icon {\r\n  margin-top: 8.5px;\r\n  font-size: 15px;\r\n  margin-left: 8.5px;\r\n}\r\n\r\n#pict-container {\r\n  padding: 0px;\r\n  height: 50%;\r\n  position: relative;\r\n  display: none;\r\n}\r\n\r\n@media screen and (min-width: 46.875em) {\r\n  #pict-container {\r\n    display: block;\r\n  }\r\n}\r\n\r\n/*#iframe-div {\r\n}*/\r\n\r\n#pictometry-ipa {\r\n  height: 100%;\r\n  width: 100%;\r\n  border: 0px;\r\n}\r\n\r\n#search-container {\r\n    float: right;\r\n}\r\n\r\n#search-input {\r\n    float: left;\r\n    width: 400px;\r\n}\r\n\r\n#search-button {\r\n    height: 2.78571rem;\r\n}\r\n\r\n#data-panel {\r\n    background: #fff;\r\n    padding-left: 12px;\r\n    padding-right: 12px;\r\n    height: 100%;\r\n}\r\n\r\n#data-panel > h1 {\r\n    color: #666;\r\n}\r\n\r\n#data-row-list > a {\r\n    background: #f5f5f5;\r\n    border: 1px solid #ddd;\r\n    display: block;\r\n    font-size: 18px;\r\n    font-weight: normal;\r\n    height: 70px;\r\n    line-height: 45px;\r\n    /*margin-left: 10px;*/\r\n    /*margin-right: 10px;*/\r\n    padding: 10px;\r\n    /*vertical-align: middle;*/\r\n    /*text-align: middle;*/\r\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\r\n    margin-bottom: 8px;\r\n}\r\n\r\n#data-row-list > a:hover {\r\n    background: #fff;\r\n    color: inherit;\r\n}\r\n\r\n#data-row-list .data-row-link-icon {\r\n    padding-right: 30px;\r\n}\r\n\r\n.data-row {\r\n    padding: 10px;\r\n    margin-bottom: 10px;\r\n    display: none;\r\n}\r\n\r\n.data-row table th, .data-row table td {\r\n    font-size: 15px;\r\n    margin-left: 8.5px;\r\n  }\r\n\r\n  #pict-container {\r\n    padding: 0px;\r\n    height: 50%;\r\n    position: relative;\r\n  }\r\n\r\n  /*#iframe-div {\r\n  }*/\r\n\r\n\r\n</style>\r\n","<script>\r\n  export default {\r\n    render(h) {\r\n      return;\r\n    },\r\n    computed: {\r\n      ipa() {\r\n        return this.$store.state.pictometry.ipa;\r\n      },\r\n      activeTopic() {\r\n        return this.$store.state.activeTopic;\r\n      }\r\n    },\r\n    mounted() {\r\n      this.didActivateTopic(this.activeTopic);\r\n    },\r\n    beforeDestroy() {\r\n      this.didDeactivateTopic(this.activeTopic);\r\n    },\r\n    watch: {\r\n      activeTopic(nextTopic, prevTopic) {\r\n        this.didDeactivateTopic(prevTopic);\r\n        this.didActivateTopic(nextTopic);\r\n      }\r\n    },\r\n    methods: {\r\n      didActivateTopic(topic) {\r\n        // console.log('didActivateTopic is firing with topic: ', topic);\r\n        switch (topic) {\r\n          case 'deeds':\r\n            // turn on DOR Parcels\r\n            this.ipa.showLayer({\r\n              id: 114828,\r\n              visible: true,\r\n            })\r\n            break;\r\n          case 'zoning':\r\n            // turn on zoning\r\n            this.ipa.showLayer({\r\n              id: 112230,\r\n              visible: true,\r\n            });\r\n            break;\r\n          case 'water':\r\n            // turn on water Parcels\r\n            this.ipa.showLayer({\r\n              id: 108982,\r\n              visible: true,\r\n            })\r\n            break;\r\n\r\n          default:\r\n            // turn off DOR parcels\r\n            this.ipa.showLayer({\r\n              id: 113478,\r\n              visible: false,\r\n            });\r\n            // turn off zoning\r\n            this.ipa.showLayer({\r\n              id: 112230,\r\n              visible: false,\r\n            });\r\n        }\r\n      },\r\n\r\n      didDeactivateTopic(topic) {\r\n        switch (topic) {\r\n          case 'deeds':\r\n            // turn off DOR parcels\r\n            this.ipa.showLayer({\r\n              id: 114828,\r\n              visible: false,\r\n            });\r\n            break;\r\n\r\n          case 'zoning':\r\n            // turn on zoning\r\n            this.ipa.showLayer({\r\n              id: 112230,\r\n              visible: false,\r\n            });\r\n            break;\r\n\r\n          case 'water':\r\n            // turn off water\r\n            this.ipa.showLayer({\r\n              id: 108982,\r\n              visible: false,\r\n            })\r\n\r\n          default:\r\n            // turn off DOR parcels\r\n            this.ipa.showLayer({\r\n              id: 113478,\r\n              visible: false,\r\n            });\r\n            // turn off zoning\r\n            this.ipa.showLayer({\r\n              id: 112230,\r\n              visible: false,\r\n            });\r\n        }\r\n      },\r\n\r\n\r\n    }\r\n  };\r\n</script>\r\n","// Leaflet\r\nimport Map_ from './leaflet/Map.vue';\r\nimport Control from './leaflet/Control.vue';\r\nimport Geojson from './leaflet/Geojson.vue';\r\nimport CircleMarker from './leaflet/CircleMarker.vue';\r\nimport ControlCorner from './leaflet/ControlCorner.vue';\r\nimport PopUp from './leaflet/PopUp.vue';\r\nimport PopUpContent from './leaflet/PopUpContent.vue';\r\nimport Polygon_ from './leaflet/Polygon.vue';\r\nimport Polyline_ from './leaflet/Polyline.vue';\r\n\r\n// Esri-Leaflet\r\nimport EsriTiledMapLayer from './esri-leaflet/TiledMapLayer.vue';\r\nimport EsriTiledOverlay from './esri-leaflet/TiledOverlay.vue';\r\nimport EsriDynamicMapLayer from './esri-leaflet/DynamicMapLayer.vue';\r\nimport EsriFeatureLayer from './esri-leaflet/FeatureLayer.vue';\r\nimport WebMap from './esri-leaflet/WebMap.vue';\r\nimport WebMapLayer from './esri-leaflet/WebMapLayer.vue';\r\n\r\n// our components\r\nimport AddressInput from './components/AddressInput.vue';\r\nimport AddressCandidateList from './components/AddressCandidateList.vue';\r\nimport OpacitySlider from './components/OpacitySlider.vue';\r\nimport VectorMarker from './components/VectorMarker.vue';\r\nimport PngMarker from './components/PngMarker.vue';\r\nimport BasemapToggleControl from './components/BasemapToggleControl.vue';\r\nimport BasemapSelectControl from './components/BasemapSelectControl.vue';\r\nimport FullScreenMapToggleTab from './components/FullScreenMapToggleTab.vue';\r\nimport LocationControl from './components/LocationControl.vue';\r\nimport MeasureControl from './components/MeasureControl.vue';\r\nimport LegendControl from './components/LegendControl.vue';\r\nimport BasemapTooltip from './components/BasemapTooltip.vue';\r\nimport ModalAbout from './components/ModalAbout.vue';\r\n\r\n// Cyclomedia\r\nimport CyclomediaButton from './cyclomedia/Button.vue';\r\nimport CyclomediaRecordingCircle from './cyclomedia/RecordingCircle.vue';\r\nimport CyclomediaRecordingsClient from './cyclomedia/recordings-client';\r\nimport SvgViewConeMarker from './cyclomedia/SvgViewConeMarker.vue';\r\nimport CyclomediaMixin from './cyclomedia/map-panel-mixin.js';\r\nimport CyclomediaWidget from './cyclomedia/Widget.vue';\r\n\r\n// Pictometry\r\nimport PictometryButton from './pictometry/Button.vue';\r\nimport PictometryMixin from './pictometry/map-panel-mixin.js';\r\nimport PictometryPngMarker from './pictometry/PngMarker.vue';\r\nimport PictometryViewCone from './pictometry/ViewCone.vue';\r\nimport PictometryWidget from './pictometry/Widget.vue';\r\nimport PictometryLayer from './pictometry/Layer.vue';\r\n\r\n\r\n// Exports\r\n// Leaflet\r\nexports.Map_ = Map_;\r\nexports.Control = Control;\r\nexports.Geojson = Geojson;\r\nexports.CircleMarker =  CircleMarker;\r\nexports.ControlCorner =  ControlCorner;\r\nexports.PopUp = PopUp;\r\nexports.PopUpContent = PopUpContent;\r\nexports.Polygon_ = Polygon_;\r\nexports.Polyline_ = Polyline_;\r\n\r\n// Esri-Leaflet\r\nexports.EsriTiledMapLayer =  EsriTiledMapLayer;\r\nexports.EsriTiledOverlay =  EsriTiledOverlay;\r\nexports.EsriDynamicMapLayer =  EsriDynamicMapLayer;\r\nexports.EsriFeatureLayer =  EsriFeatureLayer;\r\nexports.WebMap = WebMap;\r\nexports.WebMapLayer = WebMapLayer;\r\n\r\n// our components\r\nexports.AddressInput =  AddressInput;\r\nexports.AddressCandidateList =  AddressCandidateList;\r\nexports.OpacitySlider =  OpacitySlider;\r\nexports.VectorMarker =  VectorMarker;\r\nexports.PngMarker =  PngMarker;\r\nexports.BasemapToggleControl =  BasemapToggleControl;\r\nexports.BasemapSelectControl =  BasemapSelectControl;\r\nexports.FullScreenMapToggleTab =  FullScreenMapToggleTab;\r\nexports.LocationControl =  LocationControl;\r\nexports.MeasureControl =  MeasureControl;\r\nexports.LegendControl =  LegendControl;\r\nexports.BasemapTooltip =  BasemapTooltip;\r\nexports.ModalAbout = ModalAbout;\r\n\r\n// Cyclomedia\r\nexports.CyclomediaButton =  CyclomediaButton;\r\nexports.CyclomediaRecordingCircle =  CyclomediaRecordingCircle;\r\nexports.CyclomediaRecordingsClient =  CyclomediaRecordingsClient;\r\nexports.SvgViewConeMarker =  SvgViewConeMarker;\r\nexports.CyclomediaMixin = CyclomediaMixin;\r\nexports.CyclomediaWidget = CyclomediaWidget;\r\n\r\n// Pictometry\r\nexports.PictometryButton =  PictometryButton;\r\nexports.PictometryMixin = PictometryMixin;\r\nexports.PictometryPngMarker = PictometryPngMarker;\r\nexports.PictometryViewCone = PictometryViewCone;\r\nexports.PictometryWidget = PictometryWidget;\r\nexports.PictometryLayer = PictometryLayer;\r\n"],"names":["const","let","this","Map","LatLng","super","L","geoJSON","CircleMarker","L.DomUtil","L.popup","L.point","Polygon","Polyline","TiledMapLayer","L.Control","DynamicMapLayer","L.circleMarker","FeatureLayer","LEsriWebMap.webMap","layer","Marker","L.Marker","L.icon","L.marker","methods","$","CyclomediaRecordingsClient","Circle","L.DivIcon","L.Util","MeasureControl"],"mappings":"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"}